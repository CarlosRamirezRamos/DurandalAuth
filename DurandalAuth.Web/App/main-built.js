/**
 * almond 0.2.0 Copyright (c) 2011, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

/**
 * @license RequireJS text 2.0.3 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

(function(){var e,t,n;(function(r){function a(e,t){var n,r,a,i,o,s,l,c,d,u,v=t&&t.split("/"),f=b.map,h=f&&f["*"]||{};if(e&&"."===e.charAt(0)&&t){for(v=v.slice(0,v.length-1),e=v.concat(e.split("/")),c=0;e.length>c;c+=1)if(u=e[c],"."===u)e.splice(c,1),c-=1;else if(".."===u){if(1===c&&(".."===e[2]||".."===e[0]))break;c>0&&(e.splice(c-1,2),c-=2)}e=e.join("/")}if((v||h)&&f){for(n=e.split("/"),c=n.length;c>0;c-=1){if(r=n.slice(0,c).join("/"),v)for(d=v.length;d>0;d-=1)if(a=f[v.slice(0,d).join("/")],a&&(a=a[r])){i=a,o=c;break}if(i)break;!s&&h&&h[r]&&(s=h[r],l=c)}!i&&s&&(i=s,o=l),i&&(n.splice(0,o,i),e=n.join("/"))}return e}function i(e,t){return function(){return f.apply(r,y.call(arguments,0).concat([e,t]))}}function o(e){return function(t){return a(t,e)}}function s(e){return function(t){m[e]=t}}function l(e){if(g.hasOwnProperty(e)){var t=g[e];delete g[e],w[e]=!0,v.apply(r,t)}if(!m.hasOwnProperty(e)&&!w.hasOwnProperty(e))throw Error("No "+e);return m[e]}function c(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function d(t,n,r){e.onResourceLoad&&t&&e.onResourceLoad({defined:n},{id:t},r)}function u(e){return function(){return b&&b.config&&b.config[e]||{}}}var v,f,h,p,m={},g={},b={},w={},y=[].slice;h=function(e,t){var n,r=c(e),i=r[0];return e=r[1],i&&(i=a(i,t),n=l(i)),i?e=n&&n.normalize?n.normalize(e,o(t)):a(e,t):(e=a(e,t),r=c(e),i=r[0],e=r[1],i&&(n=l(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},p={require:function(e){return i(e)},exports:function(e){var t=m[e];return t!==void 0?t:m[e]={}},module:function(e){return{id:e,uri:"",exports:m[e],config:u(e)}}},v=function(e,t,n,a){var o,c,u,v,f,b,y=[];if(a=a||e,"function"==typeof n){for(t=!t.length&&n.length?["require","exports","module"]:t,f=0;t.length>f;f+=1)if(v=h(t[f],a),c=v.f,"require"===c)y[f]=p.require(e);else if("exports"===c)y[f]=p.exports(e),b=!0;else if("module"===c)o=y[f]=p.module(e);else if(m.hasOwnProperty(c)||g.hasOwnProperty(c)||w.hasOwnProperty(c))y[f]=l(c);else{if(!v.p)throw Error(e+" missing "+c);v.p.load(v.n,i(a,!0),s(c),{}),y[f]=m[c]}u=n.apply(m[e],y),e&&(o&&o.exports!==r&&o.exports!==m[e]?m[e]=o.exports:u===r&&b||(m[e]=u))}else e&&(m[e]=n);d(e,m,y)},e=t=f=function(e,t,n,a,i){return"string"==typeof e?p[e]?p[e](t):l(h(e,t).f):(e.splice||(b=e,t.splice?(e=t,t=n,n=null):e=r),t=t||function(){},"function"==typeof n&&(n=a,a=i),a?v(r,e,t,n):setTimeout(function(){v(r,e,t,n)},15),f)},f.config=function(e){return b=e,f},n=function(e,t,n){t.splice||(n=t,t=[]),g[e]=[e,t,n]},n.amd={jQuery:!0}})(),n("durandal/amd/almond-custom",function(){}),n("main-built",function(){}),n("durandal/system",["require"],function(t){var n,r=!1,a=Object.keys,i=Object.prototype.hasOwnProperty,o=Object.prototype.toString,s=!1;if(Function.prototype.bind&&("object"==typeof console||"function"==typeof console)&&"object"==typeof console.log)try{["log","info","warn","error","assert","dir","clear","profile","profileEnd"].forEach(function(e){console[e]=this.call(console[e],console)},Function.prototype.bind)}catch(l){s=!0}t.on&&t.on("moduleLoaded",function(e,t){n.setModuleId(e,t)}),e!==void 0&&(e.onResourceLoad=function(e,t){n.setModuleId(e.defined[t.id],t.id)});var c=function(){},d=function(){try{if("undefined"!=typeof console&&"function"==typeof console.log)if(window.opera)for(var e=0;arguments.length>e;)console.log("Item "+(e+1)+": "+arguments[e]),e++;else 1==Array.prototype.slice.call(arguments).length&&"string"==typeof Array.prototype.slice.call(arguments)[0]?console.log(""+Array.prototype.slice.call(arguments)):console.log(Array.prototype.slice.call(arguments));else Function.prototype.bind&&!s||"undefined"==typeof console||"object"!=typeof console.log||Function.prototype.call.call(console.log,console,Array.prototype.slice.call(arguments))}catch(t){}};return n={version:"1.2.0",noop:c,getModuleId:function(e){return e?"function"==typeof e?e.prototype.__moduleId__:"string"==typeof e?null:e.__moduleId__:null},setModuleId:function(e,t){return e?"function"==typeof e?(e.prototype.__moduleId__=t,void 0):("string"!=typeof e&&(e.__moduleId__=t),void 0):void 0},debug:function(e){return 1!=arguments.length?r:(r=e,r?(this.log=d,this.log("Debug mode enabled.")):(this.log("Debug mode disabled."),this.log=c),void 0)},isArray:function(e){return"[object Array]"===o.call(e)},log:c,defer:function(e){return $.Deferred(e)},guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=0|16*Math.random(),n="x"==e?t:8|3&t;return n.toString(16)})},acquire:function(){var e=Array.prototype.slice.call(arguments,0);return this.defer(function(n){t(e,function(){var e=arguments;setTimeout(function(){n.resolve.apply(n,e)},1)})}).promise()}},n.keys=a||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)i.call(e,n)&&(t[t.length]=n);return t},n}),n("durandal/viewEngine",["./system"],function(e){var t;return t=$.parseHTML?function(e){return $.parseHTML(e)}:function(e){return $(e).get()},{viewExtension:".html",viewPlugin:"text",isViewUrl:function(e){return-1!==e.indexOf(this.viewExtension,e.length-this.viewExtension.length)},convertViewUrlToViewId:function(e){return e.substring(0,e.length-this.viewExtension.length)},convertViewIdToRequirePath:function(e){return this.viewPlugin+"!"+e+this.viewExtension},parseMarkup:function(e){var n=t(e);if(1==n.length)return n[0];for(var r=[],a=0;n.length>a;a++){var i=n[a];if(8!=i.nodeType){if(3==i.nodeType){var o=/\S/.test(i.nodeValue);if(!o)continue}r.push(i)}}return r.length>1?$(r).wrapAll('<div class="durandal-wrapper"></div>').parent().get(0):r[0]},createView:function(t){var n=this,r=this.convertViewIdToRequirePath(t);return e.defer(function(a){e.acquire(r).then(function(e){var r=n.parseMarkup(e);r.setAttribute("data-view",t),a.resolve(r)})}).promise()}}}),n("durandal/viewLocator",["./system","./viewEngine"],function(e,t){function n(e,t){for(var n=0;e.length>n;n++){var r=e[n],a=r.getAttribute("data-view");if(a==t)return r}}function r(e){return(e+"").replace(/([\\\.\+\*\?\[\^\]\$\(\)\{\}\=\!\<\>\|\:])/g,"\\$1")}return{useConvention:function(e,t,n){e=e||"viewmodels",t=t||"views",n=n||t;var a=RegExp(r(e),"gi");this.convertModuleIdToViewId=function(e){return e.replace(a,t)},this.translateViewIdToArea=function(e,t){return t&&"partial"!=t?n+"/"+t+"/"+e:n+"/"+e}},locateViewForObject:function(t,n){var r;if(t.getView&&(r=t.getView()))return this.locateView(r,null,n);if(t.viewUrl)return this.locateView(t.viewUrl,null,n);var a=e.getModuleId(t);return a?this.locateView(this.convertModuleIdToViewId(a),null,n):this.locateView(this.determineFallbackViewId(t),null,n)},convertModuleIdToViewId:function(e){return e},determineFallbackViewId:function(e){var t=/function (.{1,})\(/,n=t.exec(""+e.constructor),r=n&&n.length>1?n[1]:"";return"views/"+r},translateViewIdToArea:function(e){return e},locateView:function(r,a,i){if("string"==typeof r){var o;if(o=t.isViewUrl(r)?t.convertViewUrlToViewId(r):r,a&&(o=this.translateViewIdToArea(o,a)),i){var s=n(i,o);if(s)return e.defer(function(e){e.resolve(s)}).promise()}return t.createView(o)}return e.defer(function(e){e.resolve(r)}).promise()}}}),n("durandal/viewModelBinder",["./system"],function(e){function t(t,i,o){if(!i||!t){if(n.throwOnErrors)throw Error(r);return e.log(r,i,t),void 0}if(!i.getAttribute){if(n.throwOnErrors)throw Error(a);return e.log(a,i,t),void 0}var s=i.getAttribute("data-view");try{e.log("Binding",s,t),n.beforeBind(t,i),o(),n.afterBind(t,i)}catch(l){if(n.throwOnErrors)throw Error(l.message+";\nView: "+s+";\nModuleId: "+e.getModuleId(t));e.log(l.message,s,t)}}var n,r="Insufficient Information to Bind",a="Unexpected View Type";return n={beforeBind:e.noop,afterBind:e.noop,bindContext:function(e,n,r){r&&(e=e.createChildContext(r)),t(e,n,function(){r&&r.beforeBind&&r.beforeBind(n),ko.applyBindings(e,n),r&&r.afterBind&&r.afterBind(n)})},bind:function(e,n){t(e,n,function(){e.beforeBind&&e.beforeBind(n),ko.applyBindings(e,n),e.afterBind&&e.afterBind(n)})}}}),n("durandal/viewModel",["./system"],function(e){function t(e){return void 0==e&&(e={}),e.closeOnDeactivate||(e.closeOnDeactivate=s.defaults.closeOnDeactivate),e.beforeActivate||(e.beforeActivate=s.defaults.beforeActivate),e.afterDeactivate||(e.afterDeactivate=s.defaults.afterDeactivate),e.interpretResponse||(e.interpretResponse=s.defaults.interpretResponse),e.areSameItem||(e.areSameItem=s.defaults.areSameItem),e}function n(t,n,r,a,i){if(t&&t.deactivate){e.log("Deactivating",t);var o;try{o=t.deactivate(n)}catch(s){return e.log(s),a.resolve(!1),void 0}o&&o.then?o.then(function(){r.afterDeactivate(t,n,i),a.resolve(!0)},function(t){e.log(t),a.resolve(!1)}):(r.afterDeactivate(t,n,i),a.resolve(!0))}else t&&r.afterDeactivate(t,n,i),a.resolve(!0)}function r(t,n,r,a){if(t)if(t.activate){e.log("Activating",t);var i;try{i=t.activate(a)}catch(o){return e.log(o),r(!1),void 0}i&&i.then?i.then(function(){n(t),r(!0)},function(t){e.log(t),r(!1)}):(n(t),r(!0))}else n(t),r(!0);else r(!0)}function a(t,n,r){return e.defer(function(a){if(t&&t.canDeactivate){var i;try{i=t.canDeactivate(n)}catch(o){return e.log(o),a.resolve(!1),void 0}i.then?i.then(function(e){a.resolve(r.interpretResponse(e))},function(t){e.log(t),a.resolve(!1)}):a.resolve(r.interpretResponse(i))}else a.resolve(!0)}).promise()}function i(t,n,r,a){return e.defer(function(i){if(t==n())return i.resolve(!0),void 0;if(t&&t.canActivate){var o;try{o=t.canActivate(a)}catch(s){return e.log(s),i.resolve(!1),void 0}o.then?o.then(function(e){i.resolve(r.interpretResponse(e))},function(t){e.log(t),i.resolve(!1)}):i.resolve(r.interpretResponse(o))}else i.resolve(!0)}).promise()}function o(o,s){var l=ko.observable(null);s=t(s);var c=ko.computed({read:function(){return l()},write:function(e){c.viaSetter=!0,c.activateItem(e)}});return c.settings=s,s.activator=c,c.isActivating=ko.observable(!1),c.canDeactivateItem=function(e,t){return a(e,t,s)},c.deactivateItem=function(t,r){return e.defer(function(e){c.canDeactivateItem(t,r).then(function(a){a?n(t,r,s,e,l):(c.notifySubscribers(),e.resolve(!1))})}).promise()},c.canActivateItem=function(e,t){return i(e,l,s,t)},c.activateItem=function(t,a){var i=c.viaSetter;return c.viaSetter=!1,e.defer(function(o){if(c.isActivating())return o.resolve(!1),void 0;c.isActivating(!0);var d=l();return s.areSameItem(d,t,a)?(c.isActivating(!1),o.resolve(!0),void 0):(c.canDeactivateItem(d,s.closeOnDeactivate).then(function(u){u?c.canActivateItem(t,a).then(function(u){u?e.defer(function(e){n(d,s.closeOnDeactivate,s,e)}).promise().then(function(){t=s.beforeActivate(t,a),r(t,l,function(e){c.isActivating(!1),o.resolve(e)},a)}):(i&&c.notifySubscribers(),c.isActivating(!1),o.resolve(!1))}):(i&&c.notifySubscribers(),c.isActivating(!1),o.resolve(!1))}),void 0)}).promise()},c.canActivate=function(){var e;return o?(e=o,o=!1):e=c(),c.canActivateItem(e)},c.activate=function(){var e;return o?(e=o,o=!1):e=c(),c.activateItem(e)},c.canDeactivate=function(e){return c.canDeactivateItem(c(),e)},c.deactivate=function(e){return c.deactivateItem(c(),e)},c.includeIn=function(e){e.canActivate=function(){return c.canActivate()},e.activate=function(){return c.activate()},e.canDeactivate=function(e){return c.canDeactivate(e)},e.deactivate=function(e){return c.deactivate(e)}},s.includeIn?c.includeIn(s.includeIn):o&&c.activate(),c.forItems=function(t){s.closeOnDeactivate=!1,s.determineNextItemToActivate=function(e,t){var n=t-1;return-1==n&&e.length>1?e[1]:n>-1&&e.length-1>n?e[n]:null},s.beforeActivate=function(e){var n=c();if(e){var r=t.indexOf(e);-1==r?t.push(e):e=t()[r]}else e=s.determineNextItemToActivate(t,n?t.indexOf(n):0);return e},s.afterDeactivate=function(e,n){n&&t.remove(e)};var n=c.canDeactivate;c.canDeactivate=function(r){return r?e.defer(function(e){function n(){for(var t=0;i.length>t;t++)if(!i[t])return e.resolve(!1),void 0;e.resolve(!0)}for(var a=t(),i=[],o=0;a.length>o;o++)c.canDeactivateItem(a[o],r).then(function(e){i.push(e),i.length==a.length&&n()})}).promise():n()};var r=c.deactivate;return c.deactivate=function(n){return n?e.defer(function(e){function r(r){c.deactivateItem(r,n).then(function(){i++,t.remove(r),i==o&&e.resolve()})}for(var a=t(),i=0,o=a.length,s=0;o>s;s++)r(a[s])}).promise():r()},c},c}var s;return s={defaults:{closeOnDeactivate:!0,interpretResponse:function(e){if("string"==typeof e){var t=e.toLowerCase();return"yes"==t||"ok"==t}return e},areSameItem:function(e,t){return e==t},beforeActivate:function(e){return e},afterDeactivate:function(e,t,n){t&&n&&n(null)}},activator:o}}),n("durandal/composition",["./viewLocator","./viewModelBinder","./viewEngine","./system","./viewModel"],function(e,t,n,r,a){function i(e){return e.model&&e.model.activate&&(v.activateDuringComposition&&void 0==e.activate||e.activate)}function o(e,t){i(e)?a.activator().activateItem(e.model).then(function(e){e&&t()}):t()}function s(e){for(var t=[],n={childElements:t,activeView:null},r=ko.virtualElements.firstChild(e);r;)1==r.nodeType&&(t.push(r),r.getAttribute(u)&&(n.activeView=r)),r=ko.virtualElements.nextSibling(r);return n}function l(e,t,n){n.activeView&&n.activeView.removeAttribute(u),t&&(n.model&&n.model.viewAttached&&(n.composingNewView||n.alwaysAttachView)&&n.model.viewAttached(t),t.setAttribute(u,!0)),n.afterCompose&&n.afterCompose(e,t,n)}function c(e,t){if("string"==typeof t.transition){if(t.activeView){if(t.activeView==e)return!1;if(!e)return!0;if(t.skipTransitionOnSameViewId){var n=t.activeView.getAttribute("data-view"),r=e.getAttribute("data-view");return n!=r}}return!0}return!1}var d={},u="data-active-view",v={activateDuringComposition:!1,convertTransitionToModuleId:function(e){return"durandal/transitions/"+e},switchContent:function(e,t,n){if(n.transition=n.transition||this.defaultTransitionName,c(t,n)){var a=this.convertTransitionToModuleId(n.transition);r.acquire(a).then(function(r){n.transition=r,r(e,t,n).then(function(){l(e,t,n)})})}else t!=n.activeView&&(n.cacheViews&&n.activeView&&$(n.activeView).css("display","none"),t?n.cacheViews?n.composingNewView?(n.viewElements.push(t),ko.virtualElements.prepend(e,t)):$(t).css("display",""):(ko.virtualElements.emptyNode(e),ko.virtualElements.prepend(e,t)):n.cacheViews||ko.virtualElements.emptyNode(e)),l(e,t,n)},bindAndShow:function(e,r,a){a.composingNewView=a.cacheViews?-1==ko.utils.arrayIndexOf(a.viewElements,r):!0,o(a,function(){if(a.beforeBind&&a.beforeBind(e,r,a),a.preserveContext&&a.bindingContext)a.composingNewView&&t.bindContext(a.bindingContext,r,a.model);else if(r){var i=a.model||d,o=ko.dataFor(r);if(o!=i){if(!a.composingNewView)return $(r).remove(),n.createView(r.getAttribute("data-view")).then(function(t){v.bindAndShow(e,t,a)}),void 0;t.bind(i,r)}}v.switchContent(e,r,a)})},defaultStrategy:function(t){return e.locateViewForObject(t.model,t.viewElements)},getSettings:function(e){var t=ko.utils.unwrapObservable(e())||{};if("string"==typeof t)return t;var n=r.getModuleId(t);if(n)return{model:t};for(var a in t)t[a]=ko.utils.unwrapObservable(t[a]);return t},executeStrategy:function(e,t){t.strategy(t).then(function(n){v.bindAndShow(e,n,t)})},inject:function(t,n){return n.model?n.view?(e.locateView(n.view,n.area,n.viewElements).then(function(e){v.bindAndShow(t,e,n)}),void 0):((void 0===n.view||n.view)&&(n.strategy||(n.strategy=this.defaultStrategy),"string"==typeof n.strategy?r.acquire(n.strategy).then(function(e){n.strategy=e,v.executeStrategy(t,n)}):this.executeStrategy(t,n)),void 0):(this.bindAndShow(t,null,n),void 0)},compose:function(t,a,i){"string"==typeof a&&(a=n.isViewUrl(a)?{view:a}:{model:a});var o=r.getModuleId(a);o&&(a={model:a});var l=s(t);a.bindingContext=i,a.activeView=l.activeView,a.cacheViews&&!a.viewElements&&(a.viewElements=l.childElements),a.model?"string"==typeof a.model?r.acquire(a.model).then(function(e){a.model="function"==typeof e?new e(t,a):e,v.inject(t,a)}):v.inject(t,a):a.view?(a.area=a.area||"partial",a.preserveContext=!0,e.locateView(a.view,a.area,a.viewElements).then(function(e){v.bindAndShow(t,e,a)})):this.bindAndShow(t,null,a)}};return ko.bindingHandlers.compose={update:function(e,t,n,r,a){var i=v.getSettings(t);v.compose(e,i,a)}},ko.virtualElements.allowedBindings.compose=!0,v}),n("durandal/widget",["./system","./composition"],function(e,t){var n="data-part",r="["+n+"]",a={},i={},o=["model","view","kind"],s={getParts:function(t){var a={};e.isArray(t)||(t=[t]);for(var i=0;t.length>i;i++){var o=t[i];if(o.getAttribute){var s=o.getAttribute(n);s&&(a[s]=o);for(var l=$(r,o),c=0;l.length>c;c++){var d=l.get(c);a[d.getAttribute(n)]=d}}}return a},getSettings:function(e){var t=ko.utils.unwrapObservable(e())||{};if("string"==typeof t)return t;for(var n in t)t[n]=-1!=ko.utils.arrayIndexOf(o,n)?ko.utils.unwrapObservable(t[n]):t[n];return t},registerKind:function(e){ko.bindingHandlers[e]={init:function(){return{controlsDescendantBindings:!0}},update:function(t,n,r,a,i){var o=s.getSettings(n);o.kind=e,s.create(t,o,i)}},ko.virtualElements.allowedBindings[e]=!0},mapKind:function(e,t,n){t&&(i[e]=t),n&&(a[e]=n)},convertKindToModuleId:function(e){return a[e]||"durandal/widgets/"+e+"/controller"},convertKindToViewId:function(e){return i[e]||"durandal/widgets/"+e+"/view"},beforeBind:function(e,t){var n=s.getParts(e),r=s.getParts(t);for(var a in n)$(r[a]).replaceWith(n[a])},createCompositionSettings:function(e){return e.model||(e.model=this.convertKindToModuleId(e.kind)),e.view||(e.view=this.convertKindToViewId(e.kind)),e.preserveContext=!0,e.beforeBind=this.beforeBind,e},create:function(e,n,r){"string"==typeof n&&(n={kind:n});var a=s.createCompositionSettings(n);t.compose(e,a,r)}};return ko.bindingHandlers.widget={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t,n,r,a){var i=s.getSettings(t);s.create(e,i,a)}},ko.virtualElements.allowedBindings.widget=!0,s}),n("durandal/modalDialog",["./composition","./system","./viewModel"],function(e,t,n){function r(e){return t.defer(function(n){"string"==typeof e?t.acquire(e).then(function(e){"function"==typeof e?n.resolve(new e):n.resolve(e)}):n.resolve(e)}).promise()}var a={},i=0,o={currentZIndex:1050,getNextZIndex:function(){return++this.currentZIndex},isModalOpen:function(){return i>0},getContext:function(e){return a[e||"default"]},addContext:function(e,t){t.name=e,a[e]=t;var n="show"+e.substr(0,1).toUpperCase()+e.substr(1);this[n]=function(t,n){return this.show(t,n,e)}},createCompositionSettings:function(e,t){var n={model:e,activate:!1};return t.afterCompose&&(n.afterCompose=t.afterCompose),n},show:function(o,s,l){var c=this,d=a[l||"default"];return t.defer(function(t){r(o).then(function(r){var a=n.activator();a.activateItem(r,s).then(function(n){if(n){var o=r.modal={owner:r,context:d,activator:a,close:function(){var e=arguments;a.deactivateItem(r,!0).then(function(n){n&&(i--,d.removeHost(o),delete r.modal,t.resolve.apply(t,e))})}};o.settings=c.createCompositionSettings(r,d),d.addHost(o),i++,e.compose(o.host,o.settings)}else t.resolve(!1)})})}).promise()}};return o.addContext("default",{blockoutOpacity:.2,removeDelay:200,addHost:function(e){var t=$("body"),n=$('<div class="modalBlockout"></div>').css({"z-index":o.getNextZIndex(),opacity:this.blockoutOpacity}).appendTo(t),r=$('<div class="modalHost"></div>').css({"z-index":o.getNextZIndex()}).appendTo(t);if(e.host=r.get(0),e.blockout=n.get(0),!o.isModalOpen()){e.oldBodyMarginRight=$("body").css("margin-right");var a=$("html"),i=t.outerWidth(!0),s=a.scrollTop();$("html").css("overflow-y","hidden");var l=$("body").outerWidth(!0);t.css("margin-right",l-i+parseInt(e.oldBodyMarginRight)+"px"),a.scrollTop(s),$("#simplemodal-overlay").css("width",l+"px")}},removeHost:function(e){if($(e.host).css("opacity",0),$(e.blockout).css("opacity",0),setTimeout(function(){$(e.host).remove(),$(e.blockout).remove()},this.removeDelay),!o.isModalOpen()){var t=$("html"),n=t.scrollTop();t.css("overflow-y","").scrollTop(n),$("body").css("margin-right",e.oldBodyMarginRight)}},afterCompose:function(e,t,n){var r=$(t),a=r.width(),i=r.height();r.css({"margin-top":""+-i/2+"px","margin-left":""+-a/2+"px"}),$(n.model.modal.host).css("opacity",1),$(t).hasClass("autoclose")&&$(n.model.modal.blockout).click(function(){n.model.modal.close()}),$(".autofocus",t).each(function(){$(this).focus()})}}),o}),n("durandal/events",["./system"],function(e){var t=/\s+/,n=function(){},r=function(e,t){this.owner=e,this.events=t};return r.prototype.then=function(e,t){return this.callback=e||this.callback,this.context=t||this.context,this.callback?(this.owner.on(this.events,this.callback,this.context),this):this},r.prototype.on=r.prototype.then,r.prototype.off=function(){return this.owner.off(this.events,this.callback,this.context),this},n.prototype.on=function(e,n,a){var i,o,s;if(n){for(i=this.callbacks||(this.callbacks={}),e=e.split(t);o=e.shift();)s=i[o]||(i[o]=[]),s.push(n,a);return this}return new r(this,e)},n.prototype.off=function(n,r,a){var i,o,s,l;if(!(o=this.callbacks))return this;if(!(n||r||a))return delete this.callbacks,this;for(n=n?n.split(t):e.keys(o);i=n.shift();)if((s=o[i])&&(r||a))for(l=s.length-2;l>=0;l-=2)r&&s[l]!==r||a&&s[l+1]!==a||s.splice(l,2);else delete o[i];return this},n.prototype.trigger=function(e){var n,r,a,i,o,s,l,c;if(!(r=this.callbacks))return this;for(c=[],e=e.split(t),i=1,o=arguments.length;o>i;i++)c[i-1]=arguments[i];for(;n=e.shift();){if((l=r.all)&&(l=l.slice()),(a=r[n])&&(a=a.slice()),a)for(i=0,o=a.length;o>i;i+=2)a[i].apply(a[i+1]||this,c);if(l)for(s=[n].concat(c),i=0,o=l.length;o>i;i+=2)l[i].apply(l[i+1]||this,s)}return this},n.prototype.proxy=function(e){var t=this;return function(n){t.trigger(e,n)}},n.includeIn=function(e){e.on=n.prototype.on,e.off=n.prototype.off,e.trigger=n.prototype.trigger,e.proxy=n.prototype.proxy},n}),n("durandal/app",["./system","./viewEngine","./composition","./widget","./modalDialog","./events"],function(e,t,n,r,a,i){var o={title:"Application",showModal:function(e,t,n){return a.show(e,t,n)},showMessage:function(e,t,n){return a.show("./messageBox",{message:e,title:t||this.title,options:n})},start:function(){var t=this;return t.title&&(document.title=t.title),e.defer(function(t){$(function(){e.log("Starting Application"),t.resolve(),e.log("Started Application")})}).promise()},setRoot:function(e,r,a){var i,o={activate:!0,transition:r};i=a&&"string"!=typeof a?a:document.getElementById(a||"applicationHost"),"string"==typeof e?t.isViewUrl(e)?o.view=e:o.model=e:o.model=e,n.compose(i,o)},adaptToDevice:function(){document.ontouchmove=function(e){e.preventDefault()}}};return i.includeIn(o),o}),n("durandal/plugins/router",["../system","../viewModel","../app"],function(e,t,n){function r(t){C(!1),e.log("Redirecting"),g.navigateTo(t)}function a(){P=!0,e.log("Cancelling Navigation"),b&&m.setLocation(b),P=!1,C(!1);var t=m.last_location[1].split("#/")[1];b||!t?$():t!=y?window.location.replace("#/"+y):$()}function i(e,t,n){L(e),g.onNavigationComplete(e,t,n),w=n,b=m.last_location[1].replace("/",""),$()}function o(t,n,r){e.log("Activating Route",t,r,n),T.activateItem(r,n).then(function(e){e?i(t,n,r):a()})}function s(){return P||m.last_location[1].replace("/","")==b}function l(e,t,n){var i=g.guardRoute(e,t,n);i?i.then?i.then(function(i){i?"string"==typeof i?r(i):o(e,t,n):a()}):"string"==typeof i?r(i):o(e,t,n):a()}function c(){if(!C()){var t=R.shift();R=[],t&&(C(!0),e.acquire(t.routeInfo.moduleId).then(function(e){t.params.routeInfo=t.routeInfo,t.params.router=g;var n=g.getActivatableInstance(t.routeInfo,t.params,e);g.guardRoute?l(t.routeInfo,t.params,n):o(t.routeInfo,t.params,n)}))}}function d(e,t){R.unshift({routeInfo:e,params:t}),c()}function u(e,t){var n=k[e];if(!s()){if(!n){if(!g.autoConvertRouteToModuleId)return g.handleInvalidRoute(e,t),void 0;n={moduleId:g.autoConvertRouteToModuleId(e,t),name:g.convertRouteToName(e)}}d(n,t)}}function v(){u(y,this.params||{})}function f(){u(""+this.app.last_route.path,this.params||{})}function h(){var e,t=this.params||{};if(g.autoConvertRouteToModuleId){var n=this.path.split("#/");if(2==n.length){var r=n[1].split("/");return e=r[0],t.splat=r.splice(1),u(e,t),void 0}}g.handleInvalidRoute(this.app.last_location[1],t)}function p(e){return g.prepareRouteInfo(e),k[""+e.url]=e,A.push(e),e.visible&&(e.isActive=ko.computed(function(){return E()&&T()&&T().__moduleId__==e.moduleId}),I.push(e)),e}var m,g,b,w,y,x,k={},A=ko.observableArray([]),I=ko.observableArray([]),E=ko.observable(!1),C=ko.observable(!1),P=!1,T=t.activator(),L=ko.observable(),R=[],$=function(){$=e.noop,E(!0),g.dfd.resolve(),delete g.dfd};return T.settings.areSameItem=function(){return!1},g={ready:E,allRoutes:A,visibleRoutes:I,isNavigating:C,activeItem:T,activeRoute:L,afterCompose:function(){setTimeout(function(){C(!1),c()},10)},getActivatableInstance:function(e,t,n){return"function"==typeof n?new n:n},useConvention:function(e){e=null==e?"viewmodels":e,e&&(e+="/"),g.convertRouteToModuleId=function(t){return e+g.stripParameter(t)}},stripParameter:function(e){var t=e.indexOf(":"),n=t>0?t-1:e.length;return e.substring(0,n)},handleInvalidRoute:function(t,n){e.log("No Route Found",t,n)},onNavigationComplete:function(e){document.title=n.title?e.caption+" | "+n.title:e.caption},navigateBack:function(){window.history.back()},navigateTo:function(e,t){switch(t=t||"trigger",t.toLowerCase()){case"skip":x=e,m.setLocation(e);break;case"replace":window.location.replace(e);break;default:m.lookupRoute("get",e)?m.setLocation(e):window.location.href=e}},replaceLocation:function(e){this.navigateTo(e,"replace")},convertRouteToName:function(e){var t=g.stripParameter(e);return t.substring(0,1).toUpperCase()+t.substring(1)},convertRouteToModuleId:function(e){return g.stripParameter(e)},prepareRouteInfo:function(e){e.url instanceof RegExp||(e.name=e.name||g.convertRouteToName(e.url),e.moduleId=e.moduleId||g.convertRouteToModuleId(e.url),e.hash=e.hash||"#/"+e.url),e.caption=e.caption||e.name,e.settings=e.settings||{}},mapAuto:function(e){e=e||"viewmodels",e+="/",g.autoConvertRouteToModuleId=function(t){return e+g.stripParameter(t)}},mapNav:function(e,t,n){return"string"==typeof e?this.mapRoute(e,t,n,!0):(e.visible=!0,p(e))},mapRoute:function(e,t,n,r){return"string"==typeof e?p({url:e,moduleId:t,name:n,visible:r}):p(e)},map:function(t){if(!e.isArray(t))return p(t);for(var n=[],r=0;t.length>r;r++)n.push(p(t[r]));return n},activate:function(t){return e.defer(function(n){var r;g.dfd=n,y=t,m=Sammy(function(e){for(var t=A(),n=0;t.length>n;n++){var a=t[n];e.get(a.url,f),r=this.routes.get[n],k[""+r.path]=a}e.get("#/",v),e.get(/\#\/(.*)/,h)}),m._checkFormSubmission=function(){return!1},m.before(null,function(e){if(x){if(e.path==="/"+x)return x=null,!1;throw Error("Expected to skip url '"+x+"', but found url '"+e.path+"'")}return!0}),m.log=function(){var t=Array.prototype.slice.call(arguments,0);t.unshift("Sammy"),e.log.apply(e,t)},m.run("#/")}).promise()}}}),n("services/appsecurity",["require","durandal/system","durandal/app","durandal/plugins/router"],function(e){var t=(e("durandal/system"),e("durandal/app"),e("durandal/plugins/router")),n="api/account",r=function(e,t,n){this.userName=e,this.password=t,this.rememberMe=n},a=ko.observable({IsAuthenticated:!1,UserName:"",Roles:[],AntiforgeryToken:null}),i=ko.observable(),o=function(){$.get(n+"/getantiforgerytokens").then(function(e){a().AntiforgeryToken=e,$(document).ajaxSend(function(t,n,r){r.hasContent&&n.setRequestHeader("__RequestVerificationToken",e)})})};return{credential:r,user:a,externalLogins:i,isUserInRole:function(e){var t=this,n=!1;return $.each(e,function(e,r){-1!=t.user().Roles.indexOf(r)&&(n=!0)}),n},login:function(e,r){var a=this,i=$.post(n+"/login",e).done(function(e){a.user(e),a.addAntiForgeryTokenToAjaxRequests(),1==e.IsAuthenticated&&(r?t.navigateTo("#/"+r):t.navigateTo("/#/account/manage"))}).fail(function(){a.user({IsAuthenticated:!1,UserName:"",Roles:[]})});return i},logout:function(){var e=this,a=$.post(n+"/logout",r).done(function(n){e.user(n),e.addAntiForgeryTokenToAjaxRequests(),null!=t.activeRoute().settings.authorize&&t.navigateTo("/#/home/index")}).fail(function(e){return e});return a},register:function(e,r,a,i){var o=this,s=$.post(n+"/register",{username:e,email:r,password:a,confirmpassword:i}).done(function(e){o.user(e),o.addAntiForgeryTokenToAjaxRequests(),t.navigateTo("/#/account/manage")});return s},getAuthInfo:function(){var e=$.get(n+"/userinfo");return e},getExternalLogins:function(){var e=$.get(n+"/externalloginslist");return e},addAntiForgeryTokenToAjaxRequests:o,externalLogin:function(e,t){location.href=n+"/externallogin?provider="+e+"&returnurl="+t},getExternalLoginConfirmationData:function(e,t,r,a){var i=$.get(n+"/externalloginconfirmation?returnurl="+e+"&username="+t+"&provideruserid="+r+"&provider="+a);return i},confirmExternalAccount:function(e,t,r,a){var i=this,o=$.post(n+"/registerexternallogin",{displayname:e,username:t,email:r,externallogindata:a}).done(function(e){i.user(e),i.addAntiForgeryTokenToAjaxRequests()});return o},hasLocalAccount:function(){var e=$.get(n+"/haslocalaccount");return e},changePassword:function(e,t,r){var a=$.post(n+"/changepassword",{oldpassword:e,newpassword:t,confirmpassword:r});return a},createLocalAccount:function(e,t){var r=$.post(n+"/createlocalaccount",{newpassword:e,confirmpassword:t});return r},externalAccounts:function(){var e=$.get(n+"/externalaccounts");return e},dissasociate:function(e,t){var r=$.post(n+"/disassociate",{provider:e,provideruserid:t});return r}}}),e.config({paths:{text:"durandal/amd/text"}}),n("main",["durandal/app","durandal/viewLocator","durandal/system","durandal/plugins/router","services/appsecurity"],function(e,t,n,r,a){e.title="Durandal Auth",e.start().then(function(){n.defer=function(e){var t=Q.defer();e.call(t,t);var n=t.promise;return t.promise=function(){return n},t},t.useConvention(),r.useConvention(),r.map([{url:"home/index",moduleId:"viewmodels/home/index",name:"Home",visible:!0},{url:"home/articles",moduleId:"viewmodels/home/articles",name:"Articles",visible:!0},{url:"home/about",moduleId:"viewmodels/home/about",name:"About",visible:!0},{url:"admin/panel",moduleId:"viewmodels/admin/panel",name:"Admin Panel",settings:{authorize:["Administrator"]},visible:!1},{url:"account/login",moduleId:"viewmodels/account/login",name:"Login",visible:!1},{url:"account/externalloginconfirmation",moduleId:"viewmodels/account/externalloginconfirmation",name:"External login confirmation",visible:!1},{url:"account/externalloginfailure",moduleId:"viewmodels/account/externalloginfailure",name:"External login failure",visible:!1},{url:"account/register",moduleId:"viewmodels/account/register",name:"Register",visible:!1},{url:"account/manage",moduleId:"viewmodels/account/manage",name:"Manage account",visible:!1,settings:{authorize:["User"]}},{url:"user/dashboard",moduleId:"viewmodels/user/dashboard",name:"Dashboard",settings:{authorize:["User"]},visible:!1},{url:":createdby/:category/:urlcodereference",moduleId:"viewmodels/user/article",name:"Article",visible:!1}]),a.addAntiForgeryTokenToAjaxRequests(),r.guardRoute=function(e){return e.settings.authorize?a.user().IsAuthenticated&&a.isUserInRole(e.settings.authorize)?!0:"/#/account/login?redirectto="+e.url:!0};var i=new Stashy.Loader("body");$(document).ajaxStart(function(){i.on("fixed","4em","#000","prepend")}).ajaxComplete(function(){i.off()}),ko.validation.init({decorateElement:!0,errorElementClass:"has-error",registerExtenders:!0,messagesOnModified:!0,insertMessages:!0,parseInputAttributes:!0,messageTemplate:null}),marked.setOptions({highlight:function(e){return hljs.highlightAuto(e).value},sanitize:!0,breaks:!0}),$(document).on("keyup",".auto-height-textarea",function(){$(this).css("height","auto"),$(this).height(this.scrollHeight)}),e.setRoot("viewmodels/shell","entrance")})}),n("durandal/http",[],function(){return{defaultJSONPCallbackParam:"callback",get:function(e,t){return $.ajax(e,{data:t})},jsonp:function(e,t,n){return-1==e.indexOf("=?")&&(n=n||this.defaultJSONPCallbackParam,e+=-1==e.indexOf("?")?"?":"&",e+=n+"=?"),$.ajax({url:e,dataType:"jsonp",data:t})},post:function(e,t){return $.ajax({url:e,data:ko.toJSON(t),type:"POST",contentType:"application/json",dataType:"json"})
}}}),n("text",["module"],function(e){var n,r,a=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],i=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,o=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,s="undefined"!=typeof location&&location.href,l=s&&location.protocol&&location.protocol.replace(/\:/,""),c=s&&location.hostname,d=s&&(location.port||void 0),u=[],v=e.config&&e.config()||{};return n={version:"2.0.3",strip:function(e){if(e){e=e.replace(i,"");var t=e.match(o);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:v.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){n=a[t];try{e=new ActiveXObject(n)}catch(r){}if(e){a=[n];break}}return e},parseName:function(e){var t=!1,n=e.indexOf("."),r=e.substring(0,n),a=e.substring(n+1,e.length);return n=a.indexOf("!"),-1!==n&&(t=a.substring(n+1,a.length),t="strip"===t,a=a.substring(0,n)),{moduleName:r,ext:a,strip:t}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,t,r,a){var i,o,s,l=n.xdRegExp.exec(e);return l?(i=l[2],o=l[3],o=o.split(":"),s=o[1],o=o[0],!(i&&i!==t||o&&o.toLowerCase()!==r.toLowerCase()||(s||o)&&s!==a)):!0},finishLoad:function(e,t,r,a){r=t?n.strip(r):r,v.isBuild&&(u[e]=r),a(r)},load:function(e,t,r,a){if(a.isBuild&&!a.inlineText)return r(),void 0;v.isBuild=a.isBuild;var i=n.parseName(e),o=i.moduleName+"."+i.ext,u=t.toUrl(o),f=v.useXhr||n.useXhr;!s||f(u,l,c,d)?n.get(u,function(t){n.finishLoad(e,i.strip,t,r)},function(e){r.error&&r.error(e)}):t([o],function(e){n.finishLoad(i.moduleName+"."+i.ext,i.strip,e,r)})},write:function(e,t,r){if(u.hasOwnProperty(t)){var a=n.jsEscape(u[t]);r.asModule(e+"!"+t,"define(function () { return '"+a+"';});\n")}},writeFile:function(e,t,r,a,i){var o=n.parseName(t),s=o.moduleName+"."+o.ext,l=r.toUrl(o.moduleName+"."+o.ext)+".js";n.load(s,r,function(){var t=function(e){return a(l,e)};t.asModule=function(e,t){return a.asModule(e,l,t)},n.write(e,s,t,i)},i)}},"node"===v.env||!v.env&&"undefined"!=typeof process&&process.versions&&process.versions.node?(r=t.nodeRequire("fs"),n.get=function(e,t){var n=r.readFileSync(e,"utf8");0===n.indexOf("﻿")&&(n=n.substring(1)),t(n)}):"xhr"===v.env||!v.env&&n.createXhr()?n.get=function(e,t,r){var a=n.createXhr();a.open("GET",e,!0),v.onXhr&&v.onXhr(a,e),a.onreadystatechange=function(){var n,i;4===a.readyState&&(n=a.status,n>399&&600>n?(i=Error(e+" HTTP status: "+n),i.xhr=a,r(i)):t(a.responseText))},a.send(null)}:("rhino"===v.env||!v.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java)&&(n.get=function(e,t){var n,r,a="utf-8",i=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),s=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(i),a)),l="";try{for(n=new java.lang.StringBuffer,r=s.readLine(),r&&r.length()&&65279===r.charAt(0)&&(r=r.substring(1)),n.append(r);null!==(r=s.readLine());)n.append(o),n.append(r);l=""+n+""}finally{s.close()}t(l)}),n}),n("text!durandal/messageBox.html",[],function(){return'<div class="messageBox">\r\n    <div class="modal-header">\r\n        <h3 data-bind="html: title"></h3>\r\n    </div>\r\n    <div class="modal-body">\r\n        <p class="message" data-bind="html: message"></p>\r\n    </div>\r\n    <div class="modal-footer" data-bind="foreach: options">\r\n        <button class="btn" data-bind="click: function () { $parent.selectOption($data); }, html: $data, css: { \'btn-primary\': $index() == 0, autofocus: $index() == 0 }"></button>\r\n    </div>\r\n</div>'}),n("durandal/messageBox",[],function(){var e=function(t,n,r){this.message=t,this.title=n||e.defaultTitle,this.options=r||e.defaultOptions};return e.prototype.selectOption=function(e){this.modal.close(e)},e.prototype.activate=function(t){t&&(this.message=t.message,this.title=t.title||e.defaultTitle,this.options=t.options||e.defaultOptions)},e.defaultTitle="Application",e.defaultOptions=["Ok"],e}),n("durandal/transitions/entrance",["../system"],function(e){var t=100,n=function(n,r,a){return e.defer(function(e){function i(){e.resolve()}function o(){a.keepScrollPosition||$(document).scrollTop(0)}function s(){o(),a.cacheViews?a.composingNewView&&ko.virtualElements.prepend(n,r):(ko.virtualElements.emptyNode(n),ko.virtualElements.prepend(n,r));var e={marginLeft:"20px",marginRight:"-20px",opacity:0,display:"block"},t={marginRight:0,marginLeft:0,opacity:1};$(r).css(e),$(r).animate(t,c,"swing",i)}if(r){var l=$(a.activeView),c=a.duration||500;l.length?l.fadeOut(t,s):s()}else o(),a.activeView?$(a.activeView).fadeOut(t,function(){a.cacheViews||ko.virtualElements.emptyNode(n),i()}):(a.cacheViews||ko.virtualElements.emptyNode(n),i())}).promise()};return n}),n("services/utils",[],function(){function e(e){return decodeURI((RegExp(e+"="+"(.+?)(&|$)").exec(location.href)||[,null])[1])}function t(e){1===e.nodeType&&$(e).addClass("animated fadeInLeft")}function n(e){1===e.nodeType&&($(e).addClass("animated fadeOutLeft"),setTimeout(function(){$(e).remove()},500))}function r(){return moment.utc().format()}function a(e){try{var t=e.entityErrors[0];return"Validation Error: "+t.errorMessage}catch(n){return"Save validation error"}}function i(e){try{var t=e.entityAspect.getValidationErrors(),n=t.map(function(e){return e.errorMessage});return n.length?n.join("; "):"no validation errors"}catch(r){return"not an entity"}}return{getURLParameter:e,addItemAnimation:t,removeItemAnimation:n,getCurrentDate:r,getSaveValidationErrorMessage:a,getEntityValidationErrorMessage:i}}),n("model/modelBuilder",["services/appsecurity","services/utils"],function(e,t){function n(e){r(e),a(e),i(e)}function r(n){var r=function(){this.articleId=ko.observable(breeze.core.getUuid()),this.imageUrl=ko.observable("/Content/icons/no_photo.png"),this.createdBy=ko.observable(e.user().UserName),this.updatedBy=ko.observable(e.user().UserName),this.isPublished=ko.observable(!1);var n=t.getCurrentDate();this.createdDate=ko.observable(n),this.updatedDate=ko.observable(n)};r.prototype.addTag=function(e){var t=this.entityAspect.entityManager.createEntity("Tag",{name:e,articleId:this.articleId()});return this.tags.push(t),t},r.prototype.deleteTag=function(e){o(e,"Tag"),this.throwIfNotOwnerOf(e),e.entityAspect.setDeleted(),this.tags.remove(e)},r.prototype.throwIfNotOwnerOf=function(e){if(!e.articleId||e.articleId()!==this.articleId())throw Error("Object is not associated with current Article")};var a=function(e){s(e),l(e),e.splitTags=ko.computed(function(){var t=[];return ko.utils.arrayForEach(e.tags(),function(e){t.push(e.name())}),t.join(",")}),e.formattedCreatedDate=ko.computed(function(){return moment(e.createdDate()).format("MMM Do YY")}),e.unsavedChanges=ko.observable(e.entityAspect.entityState.isAddedModifiedOrDeleted())};n.registerEntityTypeCtor("Article",r,a)}function a(e){var t=function(){this.categoryId=ko.observable(breeze.core.getUuid())};e.registerEntityTypeCtor("Category",t)}function i(e){var t=function(){this.tagId=ko.observable(breeze.core.getUuid())};e.registerEntityTypeCtor("Tag",t)}function o(e,t){if(!e.entityType||e.entityType.shortName!==t)throw Error("Object must be an entity of type "+t)}function s(e){var t,n,r,a,i,o,s,l,d=e.entityType;if(d){for(t=0;d.dataProperties.length>t;t+=1){for(n=d.dataProperties[t],r=n.name,a=e[r],i=[],o=0;n.validators.length>o;o+=1)s=n.validators[o],l={propertyName:r,validator:function(e){var t=this.innerValidator.validate(e,{displayName:this.propertyName});return this.message=t?t.errorMessage:"",null===t},message:"",innerValidator:s},i.push(l);a.extend({validation:i})}for(t=0;d.foreignKeyProperties.length>t;t+=1){for(n=d.foreignKeyProperties[t],r=n.name,a=e[r],i=[],o=0;n.validators.length>o;o+=1)s=n.validators[o],l={propertyName:r,validator:function(e){var t=this.innerValidator.validate(e,{displayName:this.propertyName});return this.message=t?t.errorMessage:"",null===t},message:"",innerValidator:s},i.push(l);a.extend({validation:i}),n.isNullable||a.extend({notEqual:c})}}}function l(e){var t=ko.observable(!1),n=function(){var n=e.entityAspect.getValidationErrors().length>0;t()===n?t.valueHasMutated():t(n)};n(),e.entityAspect.validationErrorsChanged.subscribe(n),e.hasValidationErrors=t}var c=0,d={extendMetadata:n};return d}),n("services/entitymanagerprovider",["durandal/app"],function(e){function t(){return new i}function n(){return a.fetchMetadata().then(function(){o.modelBuilder&&o.modelBuilder(a.metadataStore);var e=breeze.EntityQuery.from("durandalauth/lookups");return a.executeQuery(e)})}breeze.NamingConvention.camelCase.setAsDefault();var r="breeze",a=new breeze.EntityManager(r),i=function(){var t=function(){var t;this.manager=function(){return t||(t=a.createEmptyCopy(),t.importEntities(a.exportEntities()),t.hasChangesChanged.subscribe(function(){e.trigger("hasChanges")})),t}};return t}(),o={prepare:n,create:t};return o}),n("services/logger",["durandal/system"],function(e){function t(e,t,n,r){a(e,t,n,r,"info")}function n(e,t,n,r){a(e,t,n,r,"error")}function r(e,t,n,r){a(e,t,n,r,"success")}function a(t,n,r,a,i){r=r?"["+r+"] ":"",n?e.log(r,t,n):e.log(r,t),a&&("error"===i?toastr.error(t,"Something failed",{timeOut:0,positionClass:"toast-bottom-full-width"}):"success"===i?toastr.success(t,"Success",{timeOut:0,positionClass:"toast-bottom-full-width"}):toastr.info(t,"Info",{timeOut:0,positionClass:"toast-bottom-full-width"}))}var i={log:t,logError:n,logSuccess:r};return i}),n("services/errorhandler",["services/logger","durandal/system","services/utils"],function(e,t,n){function r(e){return $.extend(e,new a(e))}var a=function(){var r=function(r){this.handleError=function(a){throw a.entityErrors&&(a.message=n.getSaveValidationErrorMessage(a)),e.logError(a.message,null,t.getModuleId(r),!0),a},this.log=function(n,a){e.log(n,null,t.getModuleId(r),a)},this.handlevalidationerrors=function(t){""!=t.responseText?$.each($.parseJSON(t.responseText),function(n,r){e.logError(r,null,t,!0)}):e.logError(t.statusText,null,t,!0)}};return r}();return{includeIn:r}}),n("services/repository",[],function(){function e(e,n,r,a){return new t(e,n,r,a)}var t=function(){var e=function(e,t,n,r){function a(t){return e.manager().executeQuery(t.using(r||breeze.FetchStrategy.FromServer)).then(function(e){return e.results})}function i(t){return e.manager().executeQueryLocally(t)}function o(){return s().metadataStore}function s(){return e.manager()}function l(e,t){if(!e.entityType||e.entityType.shortName!==t)throw Error("Object must be an entity of type "+t)}var c;t&&(c=o().getEntityType(t),c.setProperties({defaultResourceName:n}),o().setEntityTypeForResourceName(n,t)),this.withId=function(e){if(!t)throw Error("Repository must be created with an entity type specified");return s().fetchEntityByKey(t,e,!0).then(function(e){if(!e.entity)throw Error("Entity not found!");return e.entity})},this.find=function(e){var t=breeze.EntityQuery.from(n).where(e);return a(t)},this.findInCache=function(e){var t=breeze.EntityQuery.from(n).where(e);return i(t)},this.all=function(){var e=breeze.EntityQuery.from(n);return a(e)},this.create=function(e){var n=s().createEntity(t,e);return n},this.delete=function(e){l(e,t),e.entityAspect.setDeleted(e)}};return e}();return{create:e,getCtor:t}}),n("services/privatearticlerepository",["services/repository"],function(e){function t(e,t,r,a){return new n(e,t,r,a)}var n=function(){var t=function(t,n,r,a){function i(e){return t.manager().executeQuery(e.using(a||breeze.FetchStrategy.FromServer)).then(function(e){return e.results})}e.getCtor.call(this,t,n,r,a),this.all=function(){var e=breeze.EntityQuery.from(r).orderBy("createdDate desc").expand("Tags");return i(e)}};return t.prototype=e.create(),t}();return{create:t}}),n("services/publicarticlerepository",["services/repository"],function(e){function t(e,t,r,a){return new n(e,t,r,a)}var n=function(){var t=function(t,n,r,a){function i(e){return t.manager().executeQuery(e.using(a||breeze.FetchStrategy.FromServer)).then(function(e){return e.results})}e.getCtor.call(this,t,n,r,a),this.find=function(e,t,n){var a=breeze.EntityQuery.from(r).where(e).orderBy("createdDate desc").expand("Category,Tags").skip(t*n).take(n);return i(a)}};return t.prototype=e.create(),t}();return{create:t}}),n("services/unitofwork",["services/entitymanagerprovider","services/repository","services/privatearticlerepository","services/publicarticlerepository","durandal/app"],function(e,t,n,r,a){function i(){return new c}function o(e){return l[e]||(l[e]=new d),l[e]}function s(){for(key in l)0==l[key].referenceCount&&delete l[key]}var l={},c=function(){var i=function(){var i=e.create();this.hasChanges=function(){return i.manager().hasChanges()},this.commit=function(){var e=new breeze.SaveOptions({resourceName:"durandalauth/savechanges"});return i.manager().saveChanges(null,e).then(function(e){a.trigger("saved",e.entities)})},this.rollback=function(){i.manager().rejectChanges()},this.privatearticles=n.create(i,"Article","durandalauth/privatearticles"),this.publicarticles=r.create(i,"Article","durandalauth/publicarticles"),this.userprofiles=t.create(i,"UserProfile","durandalauth/userprofiles"),this.categories=t.create(i,"Category","durandalauth/categories",breeze.FetchStrategy.FromLocalCache),this.tags=t.create(i,"Tag","durandalauth/tags")};return i}(),d=function(){var e=function(){var e=null;this.referenceCount=0,this.value=function(){return null===e&&(e=new c),this.referenceCount++,e},this.clear=function(){e=null,this.referenceCount=0,s()}};return e.prototype.release=function(){this.referenceCount--,0===this.referenceCount&&this.clear()},e}();return{create:i,get:o}}),n("viewmodels/shell",["durandal/plugins/router","durandal/app","services/appsecurity","services/errorhandler","services/entitymanagerprovider","model/modelBuilder"],function(e,t,n,r,a,i){a.modelBuilder=i.extendMetadata;var o={router:e,appsecurity:n,logout:function(){var e=this;n.logout().fail(e.handlevalidationerrors)},viewAttached:function(){$(document).find("footer").show()},activate:function(){var t=this;return a.prepare().then(function(){n.getAuthInfo().then(function(t){return n.user(t),e.activate("home/index")}).fail(t.handlevalidationerrors)}).fail(t.handlevalidationerrors)}};return r.includeIn(o),o}),n("viewmodels/account/externalloginconfirmation",["services/appsecurity","durandal/plugins/router","services/utils","services/errorhandler"],function(e,t,n,r){var a=ko.observable(),i=ko.observable().extend({required:!0}),o=ko.observable().extend({required:!0,email:!0}),s=ko.observable(),l=ko.observable(),c={DisplayName:a,UserName:i,Email:o,ExternalLoginData:s,ReturnUrl:l,activate:function(){var t=this;return ga("send","pageview",{page:window.location.href,title:document.title}),e.getExternalLoginConfirmationData(n.getURLParameter("returnurl"),n.getURLParameter("username"),n.getURLParameter("provideruserid"),n.getURLParameter("provider")).then(function(e){t.DisplayName(e.DisplayName),t.UserName(e.UserName.split("@")[0]),t.Email(e.UserName),t.ExternalLoginData(e.ExternalLoginData),t.ReturnUrl(e.ReturnUrl)}).fail(t.handlevalidationerrors)},confirmexternalaccount:function(){var n=this;return 0!=this.errors().length?(this.errors.showAllMessages(),void 0):(e.confirmExternalAccount(n.DisplayName(),n.UserName(),n.Email(),n.ExternalLoginData()).then(function(){t.navigateTo("/#/"+n.ReturnUrl())}).fail(n.handlevalidationerrors),void 0)}};return r.includeIn(c),c.errors=ko.validation.group(c),c}),n("viewmodels/account/externalloginfailure",[],function(){return{activate:function(){ga("send","pageview",{page:window.location.href,title:document.title})}}}),n("viewmodels/account/login",["services/appsecurity","durandal/plugins/router","services/utils","services/errorhandler"],function(e,t,n,r){var a=ko.observable().extend({required:!0}),i=ko.observable().extend({required:!0,minLength:6}),o=ko.observable(),s=ko.observable(),l=ko.observable(!1);ko.observable(!1);var c={username:a,password:i,rememberMe:o,returnUrl:s,isRedirect:l,appsecurity:e,activate:function(){ga("send","pageview",{page:window.location.href,title:document.title});var t=n.getURLParameter("redirectto");return"null"!=t&&this.isRedirect(!0),this.returnUrl("null"!=t?t:"account/manage"),e.getExternalLogins().then(function(t){e.externalLogins(t)})},login:function(){if(0!=this.errors().length)return this.errors.showAllMessages(),void 0;var t=new e.credential(this.username(),this.password(),this.rememberMe()||!1),n=this;e.login(t,n.returnUrl()).fail(n.handlevalidationerrors)},logout:function(){e.logout()},externalLogin:function(t,n){e.externalLogin(n.Provider,this.returnUrl())},socialIcon:function(e){var t="";switch(e.Provider.toLowerCase()){case"facebook":t="icon-facebook-sign";break;case"twitter":t="icon-twitter-sign";break;case"google":t="icon-google-plus-sign";break;case"microsoft":t="icon-envelope";break;default:t="icon-check-sign"}return t}};return r.includeIn(c),c.errors=ko.validation.group(c),c}),n("viewmodels/account/manage",["services/appsecurity","services/errorhandler","services/logger"],function(e,t,n){var r={hasAccount:ko.observable(),returnUrl:ko.observable("manage"),withLocalForm:{oldPassword:ko.observable().extend({required:!0,minLength:6}),newPassword:ko.observable().extend({required:!0,minLength:6}),confirmNewPassword:ko.observable().extend({required:!0,minLength:6})},withoutLocalForm:{newPassword:ko.observable().extend({required:!0,minLength:6}),confirmNewPassword:ko.observable().extend({required:!0,minLength:6})},externalAccounts:ko.observableArray(),showRemoveButton:ko.observable(),appsecurity:e,changePassword:function(){var t=this;return this.withLocalFormErrors.isValid()?(e.changePassword(this.withLocalForm.oldPassword(),this.withLocalForm.newPassword(),this.withLocalForm.confirmNewPassword()).then(function(){e.hasLocalAccount().then(function(e){t.hasAccount(e),t.withLocalForm.oldPassword(""),t.withLocalForm.newPassword(""),t.withLocalForm.confirmNewPassword(""),t.withLocalFormErrors.errors.showAllMessages(!1),n.logSuccess("Password changed succesfully",null,null,!0)})}).fail(t.handlevalidationerrors),void 0):(this.withLocalFormErrors.errors.showAllMessages(),void 0)},createLocalAccount:function(){var t=this;return this.withoutLocalFormErrors.isValid()?(e.createLocalAccount(this.withoutLocalForm.newPassword(),this.withoutLocalForm.confirmNewPassword()).then(function(){e.hasLocalAccount().then(function(r){t.hasAccount(r),t.withoutLocalForm.newPassword(""),t.withoutLocalForm.confirmNewPassword(""),n.logSuccess("Local account created succesfully",null,null,!0),e.externalAccounts().then(function(e){t.externalAccounts(e.ExternalLogins),t.showRemoveButton(e.ShowRemoveButton)}).fail(t.handlevalidationerrors)})}).fail(t.handlevalidationerrors),void 0):(this.withoutLocalFormErrors.errors.showAllMessages(),void 0)},removeExternalAccount:function(t,r){var a=this;e.dissasociate(r.Provider,r.ProviderUserId).then(function(t){n.logSuccess(t,null,null,!0),e.externalAccounts().then(function(e){a.externalAccounts(e.ExternalLogins),a.showRemoveButton(e.ShowRemoveButton)}).fail(a.handlevalidationerrors)}).fail(a.handlevalidationerrors)},activate:function(){var t=this;return ga("send","pageview",{page:window.location.href,title:document.title}),$.when(e.hasLocalAccount(),e.externalAccounts(),e.getExternalLogins()).then(function(n,r,a){t.hasAccount(n[0]),t.externalAccounts(r[0].ExternalLogins),t.showRemoveButton(r[0].ShowRemoveButton),e.externalLogins(a[0])}).fail(t.handlevalidationerrors)},externalLogin:function(t,n){e.externalLogin(n.Provider,this.returnUrl()).fail(self.log(n,!0))},socialIcon:function(e){var t="";switch(e.Provider.toLowerCase()){case"facebook":t="icon-facebook-sign";break;case"twitter":t="icon-twitter-sign";break;case"google":t="icon-google-plus-sign";break;case"microsoft":t="icon-envelope";break;default:t="icon-check-sign"}return t}};return t.includeIn(r),r.withLocalFormErrors=ko.validatedObservable(r.withLocalForm),r.withoutLocalFormErrors=ko.validatedObservable(r.withoutLocalForm),r}),n("viewmodels/account/register",["services/appsecurity","durandal/plugins/router","services/errorhandler"],function(e,t,n){var r=ko.observable().extend({required:!0}),a=ko.observable().extend({required:!0,email:!0}),i=ko.observable().extend({required:!0,minLength:6}),o=ko.observable().extend({required:!0,minLength:6,equal:i}),s={username:r,email:a,password:i,confirmpassword:o,activate:function(){ga("send","pageview",{page:window.location.href,title:document.title})},register:function(){var t=this;return 0!=this.errors().length?(this.errors.showAllMessages(),void 0):(e.register(this.username(),this.email(),this.password(),this.confirmpassword()).fail(t.handlevalidationerrors),void 0)}};return n.includeIn(s),s.errors=ko.validation.group(s),s}),n("viewmodels/admin/panel",["services/unitofwork"],function(e){var t={userprofiles:ko.observableArray(),activate:function(){var t=this,n=e.create();return ga("send","pageview",{page:window.location.href,title:document.title}),n.userprofiles.all().then(function(e){t.userprofiles(e)})}};return t}),n("viewmodels/home/about",[],function(){return{activate:function(){ga("send","pageview",{page:window.location.href,title:document.title})}}}),n("viewmodels/home/articles",["services/unitofwork","services/errorhandler"],function(e,t){function n(e,t){var n=breeze.Predicate.create("isPublished","==",!0);if(e){var r=breeze.Predicate.create("title",breeze.FilterQueryOp.Contains,e).or(breeze.Predicate.create("description",breeze.FilterQueryOp.Contains,e));n=n.and(r)}return t&&(n=n.and(breeze.Predicate.create("categoryId","==",t))),n}var e=e.create(),r={search:ko.observable(""),selectedCategory:ko.observable(""),page:ko.observable(0),count:ko.observable(10),categories:ko.observableArray(),articles:ko.observableArray(),activate:function(){var t=this;ga("send","pageview",{page:window.location.href,title:document.title});var r=e.publicarticles.find(n(t.search(),t.selectedCategory()),t.page(),t.count()).then(function(e){t.articles(e)}),a=e.categories.all().then(function(e){t.categories(e)});return Q.all([r,a]).fail(t.handleError)},viewAttached:function(){Stashy.OffCanvas("#articles .st-offcanvas",{}).layout(),$("#articles .st-offcanvas").animate({opacity:1},500)},evaluateKey:function(){return"keypress"==event.type&&13==event.keyCode&&this.searchArticles(!1),!0},changeSelectedCategory:function(e,t){t.selectedCategory(e.categoryId()),t.searchArticles(!1)},removeSelectedCategory:function(){this.selectedCategory(""),this.searchArticles(!1)},loadMoreArticles:function(){this.page(this.page()+1),this.searchArticles(!0)},searchArticles:function(t){var r=this;t||r.page(0),e.publicarticles.find(n(r.search(),r.selectedCategory()),r.page(),r.count()).then(function(e){t?ko.utils.arrayForEach(e,function(e){r.articles.push(e)}):r.articles(e),r.count()>e.length?$("#btn-loadmore").addClass("disabled"):$("#btn-loadmore").removeClass("disabled")})}};return t.includeIn(r),r}),n("viewmodels/home/index",[],function(){return{activate:function(){ga("send","pageview",{page:window.location.href,title:document.title})},viewAttached:function(){Stashy.Slider("#index #featured",{showControls:!1,showIndicators:!1,enableTouch:!0}).on(),$("#index #featured").animate({opacity:1},500)}}}),n("viewmodels/user/article",["services/unitofwork"],function(e){var t={article:ko.observable(),activate:function(t){var n=this,r=e.get(t.urlcodereference),a=r.value();return ga("send","pageview",{page:window.location.href,title:document.title}),a.publicarticles.find(breeze.Predicate.create("urlCodeReference","==",t.urlcodereference).and("category.name","==",t.category).and("createdBy","==",t.createdby),0,1).then(function(e){n.article(e[0])})},deactivate:function(){e.get(this.article().urlCodeReference()).release()}};return t}),n("viewmodels/user/dashboard",["services/unitofwork","services/errorhandler","services/logger","services/utils"],function(e,t,n,r){function a(e,t){for(var n=0;t().length>n;n++)if(e==t()[n].name())return t()[n]}function i(e){$("#tags").tagsInput({onAddTag:function(t){e().addTag(t)},onRemoveTag:function(t){e().deleteTag(a(t,e().tags))},defaultText:"New tag"})}var e=e.create(),o={categories:ko.observableArray(),selectedArticle:ko.observable(),articles:ko.observableArray(),updating:ko.observable(!1),preview:ko.observable(!1),activate:function(){ga("send","pageview",{page:window.location.href,title:document.title});var t=this,n=e.privatearticles.all().then(function(e){t.articles(e)}),r=e.categories.all().then(function(e){t.categories(e)});return Q.all([n,r]).fail(t.handleError)},viewAttached:function(){var e=this;Stashy.FocalPoint("#dashboard img").on(),$("#dashboard #edited-article").on("hide.bs.modal",function(){e.selectedArticle().entityAspect.hasValidationErrors&&(ko.validation.group(e.selectedArticle()),e.selectedArticle().errors.showAllMessages()),e.selectedArticle().unsavedChanges(e.selectedArticle().entityAspect.entityState.isAddedModifiedOrDeleted())}),Stashy.ShowMeMore("#dashboard-articles .row",{linkClass:"btn btn-primary",linkText:"Show more articles",howMany:4}).on(),$("#dashboard #edited-article").on("shown.bs.modal",function(){$("#dashboard #edited-article .zen-mode").zenForm({trigger:"#dashboard #edited-article .go-zen"}),$("#dashboard #edited-article .zen-mode").keyup()}),$("#dashboard #edited-article").on("zf-destroyed",function(){$("#dashboard #edited-article .zen-mode").trigger("change")})},newArticle:function(){var t=this,n=e.privatearticles.create({categoryId:this.categories()[0].categoryId()});this.articles.unshift(n),this.selectedArticle(n),i(t.selectedArticle),this.updating(!1),$("#edited-article").modal("show")},editArticle:function(e){var t=this;this.selectedArticle(e),i(t.selectedArticle),this.updating(!0),$("#edited-article").modal("show")},saveArticles:function(){var t=this;return e.hasChanges()?(e.commit().then(function(){n.logSuccess("Article saved succesfully",null,null,!0),ko.utils.arrayForEach(t.articles(),function(e){e.unsavedChanges(e.entityAspect.entityState.isAddedModifiedOrDeleted())})}).fail(this.handleError),!0):!0},deleteArticle:function(t,r,a){for(var i=this,o=t.tags().length,s=0;o>s;s++)e.tags.delete(t.tags()[0]);e.privatearticles.delete(t),e.commit().then(function(){r.articles.remove(t),n.logSuccess("Article removed succesfully",null,null,!0),a&&$("#edited-article").modal("hide")}).fail(i.handleError)},closeModal:function(){$("#edited-article").modal("hide")},changePreview:function(e,t){t.preview()?t.preview(!1):t.preview(!0)},convertMarkdown:function(e){e.html(marked(e.markdown()))},utils:r};return t.includeIn(o),o}),n("text!views/header.html",[],function(){return'<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">\r\n    <div class="navbar-header">        \r\n        <button type="button" class="navbar-toggle"  data-toggle="collapse" data-target=".navbar-main-collapse">\r\n            <span class="icon-bar"></span>\r\n            <span class="icon-bar"></span>\r\n            <span class="icon-bar"></span>\r\n        </button>              \r\n        <a href="/#/home/index" class="navbar-brand">DurandalAuth</a>\r\n    </div>\r\n    <div class="collapse navbar-collapse navbar-main-collapse" style="height: 0px;">\r\n        <ul class="nav navbar-nav" data-bind="foreach: router.visibleRoutes">\r\n            <li data-bind="css: { active: isActive }">\r\n               <a data-bind="attr: { href: hash }, html: name"></a>\r\n            </li>\r\n        </ul>\r\n        <ul class="nav navbar-nav navbar-right" data-bind="with: appsecurity.user">\r\n            <li data-bind="if: !IsAuthenticated">                    \r\n                <a href="/#/account/login"><i class="icon-user"></i>&nbsp; Login</a>\r\n            </li>\r\n            <li class="dropdown" data-bind="if: IsAuthenticated">\r\n                <a href="#" class="dropdown-toggle" data-toggle="dropdown">\r\n                    <i class="icon-user"></i>&nbsp; Hi <span data-bind="    text: UserName"></span>\r\n                    <b class="caret"></b>\r\n               </a>                                \r\n               <ul class="dropdown-menu" data-bind="with : $parent">\r\n                    <li><a href="/#/account/manage">Manage your account</a></li>\r\n                    <li><a href="/#/user/dashboard">Dashboard</a></li>\r\n                    <li data-bind="visible: appsecurity.isUserInRole([\'Administrator\'])" class="divider"></li>\r\n                    <li data-bind="if: appsecurity.isUserInRole([\'Administrator\'])"><a href="/#/admin/panel">Admin Panel</a></li>\r\n                    <li class="divider"></li>\r\n                    <li><a href="#" data-bind="click: logout">Logout</a></li>\r\n                </ul>\r\n            </li>                    \r\n        </ul>                \r\n    </div>              \r\n</nav>'}),n("text!views/shell.html",[],function(){return"<div>\r\n    <header data-bind=\"compose : 'header.html'\"></header>\r\n    <div class=\"page-host\">\r\n            <!--ko compose: { \r\n                model: router.activeItem, //wiring the router\r\n                afterCompose: router.afterCompose, //wiring the router\r\n                transition:'entrance', //use the 'entrance' transition when switching views\r\n                cacheViews:true //telling composition to keep views in the dom, and reuse them (only a good idea with singleton view models)\r\n            }--><!--/ko-->\r\n    </div>\r\n</div>\r\n\r\n<div class=\"st-sticky-push\"></div>"}),n("text!views/account/externalloginconfirmation.html",[],function(){return'<div id="externalloginconfirmation">\r\n    <div class="container">\r\n        <div class="page-header">\r\n            <h1 class="text-center">External login confirmation   <small>confirm your internal user name and mail</small></h1>\r\n        </div>\r\n        <div class="row">\r\n            <div class="col-lg-offset-2 col-lg-7">\r\n                <div class="alert alert-success">\r\n                    <button type="button" class="close" data-dismiss="alert">x</button>\r\n                    <strong>You\'ve successfully</strong> authenticated with <span data-bind="text: DisplayName"></span>.\r\n                    Please enter a user name for this site below and click the Confirm button to finish\r\n                    logging in.\r\n                </div>\r\n                <form data-bind="submit: confirmexternalaccount">            \r\n                    <div class="page-header">\r\n                        <h4>Associate your <span data-bind="text: DisplayName"></span> account</h4>\r\n                    </div>    \r\n                    <div class="form-group" data-bind="validationElement: UserName">\r\n                        <label class="control-label" for="UserName">User name</label>        \r\n                        <input class="form-control" type="text" data-bind="value: UserName" placeholder="User name">        \r\n                    </div>\r\n                    <div class="form-group" data-bind="validationElement: Email">\r\n                        <label class="control-label" for="Email">Email</label>    \r\n                        <input class="form-control" type="text" data-bind="value: Email" placeholder="Email">    \r\n                    </div>\r\n                    <div class="panel-footer">\r\n                        <button type="submit" class="btn btn-primary" >Confirm account</button>    \r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'}),n("text!views/account/externalloginfailure.html",[],function(){return'<div id="externalloginfailure">\r\n    <div class="container">\r\n        <div class="page-header">\r\n            <h1>External login failure</h1>\r\n        </div>\r\n        <div class="alert alert-danger">\r\n            <button type="button" class="close" data-dismiss="alert">x</button>\r\n            <strong>Couldn�t authenticate </strong>using your credentials. Try later and if the problem persist <a href="/#/home/about">contact with us</a>\r\n        </div>\r\n    </div>\r\n</div>'
}),n("text!views/account/login.html",[],function(){return'<div id="login">\r\n    <div class="container">\r\n        <div class="page-header">\r\n            <h1>Login to your account   <small>use your site credentials or any of the external providers allowed</small></h1>\r\n        </div>\r\n        <div class="row" data-bind="visible: !appsecurity.user().IsAuthenticated">\r\n            <div class="col-lg-6">\r\n                <form class="form-horizontal">\r\n                    <div class="page-header">\r\n                        <h4>Sign in with your credentials</h4>\r\n                    </div>\r\n                    <div class="form-group" data-bind="validationElement: username">\r\n                       <label class="control-label col-lg-4" for="username">Username</label>\r\n                        <div class="col-lg-8">\r\n                            <input class="form-control" type="text"  data-bind="value: username" placeholder="User name">                       \r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group" data-bind="validationElement: password">\r\n                        <label class="control-label col-lg-4" for="email">Password</label>\r\n                        <div class="col-lg-8">\r\n                            <input class="form-control" type="password"  data-bind="value: password" placeholder="Password">                        \r\n                        </div>\r\n                    </div>  \r\n                    <div class="checkbox col-lg-offset-4">\r\n                        <label class="checkbox">\r\n                            <input type="checkbox" data-bind="value: rememberMe">Remember me\r\n                        </label>                      \r\n                    </div>                                                                                                     \r\n                    <div class="col-lg-offset-4 mart2">\r\n                        <button type="submit" class="btn btn-primary" data-bind="click: login">Sign in</button>\r\n                        <button type="reset" class="btn btn-default">Reset</button>                        \r\n                        <p class="mart5"> <a class="btn btn-link" href="/#/account/register">Register</a>if don\'t have and account?</p>\r\n                    </div> \r\n                </form>                      \r\n            </div>\r\n    \r\n            <div class="col-offset-1 col-lg-5">\r\n                <div class="page-header">\r\n                    <h4>... or you can sign in using another service</h4>\r\n                </div>\r\n                <div class="list-group" data-bind="foreach: appsecurity.externalLogins">                        \r\n                    <a class="list-group-item lead" href="#"  data-bind="click: function (data, event) { $parent.externalLogin($parent, data, event) }, attr: { \'data-provider\': Provider }">\r\n                        <i data-bind="css: $parent.socialIcon($data)"></i>\r\n                        <span data-bind="text: ProviderDisplayName"></span>\r\n                    </a>\r\n                </div>\r\n            </div>    \r\n        </div>\r\n  \r\n        <div class="jumbotron" data-bind="visible: appsecurity.user().IsAuthenticated && !isRedirect()">\r\n            <h2>You are actually logged in</h2>\r\n            <a class="btn btn-primary" data-bind="click : logout">Logout</a>\r\n        </div>\r\n\r\n        <div class="jumbotron" data-bind="visible: appsecurity.user().IsAuthenticated && isRedirect()">\r\n            <h2>You are actually logged in but cannot access this route with your current permissions</h2>\r\n            <p class="lead">Sign out and enter again the credentials with the correct permissions</p>\r\n            <a class="btn btn-primary" data-bind="click: logout">Logout</a>\r\n        </div>\r\n\r\n    </div>\r\n</div>'}),n("text!views/account/manage.html",[],function(){return'<div id="manage">\r\n    <div class="container">\r\n        <div class="page-header">\r\n            <h1>Manage your account   <small>change passwords and manage your external accounts</small></h1>\r\n        </div>\r\n        <div class="row">\r\n            <div class="col-lg-6">                \r\n                <form data-bind="if: hasAccount, submit: changePassword" class="form-horizontal">\r\n                    <div class="page-header">\r\n                        <h4>Change password</h4>\r\n                    </div>\r\n                    <div class="form-group" data-bind="validationElement: withLocalForm.oldPassword">\r\n                        <label class="control-label col-lg-4" for="oldpassword">Old Password</label>\r\n                        <div class="col-lg-8">\r\n                            <input class="form-control" type="password"  data-bind="value: withLocalForm.oldPassword" placeholder="Old Password">\r\n                        </div>                        \r\n                    </div>\r\n                    <div class="form-group" data-bind="validationElement: withLocalForm.newPassword">\r\n                        <label class="control-label col-lg-4" for="newPassword">New Password</label>        \r\n                        <div class="col-lg-8">           \r\n                            <input class="form-control" type="password"  data-bind="value: withLocalForm.newPassword" placeholder="New Password">                                        \r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group" data-bind="validationElement: withLocalForm.confirmNewPassword">\r\n                           <label class="control-label col-lg-4" for="confirmNewPassword">Confirm new Password</label>\r\n                            <div class="col-lg-8">\r\n                                <input class="form-control" type="password"  data-bind="value: withLocalForm.confirmNewPassword" placeholder="Confirm New Password">                                           \r\n                            </div>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <div class="col-lg-offset-4">\r\n                            <button type="submit" class="btn btn-primary">Change password</button>\r\n                            <button type="reset" class="btn btn-default">Reset</button>\r\n                        </div>\r\n                    </div>                   \r\n               </form>  \r\n               <form data-bind="if: !hasAccount(), submit: createLocalAccount" class="form-horizontal col-lg-offset-1">\r\n                    <fieldset>\r\n                        <legend>Create local account</legend>\r\n                        <div class="form-group" data-bind="validationElement: withoutLocalForm.newPassword">\r\n                            <label class="control-label col-lg-4" for="newPassword">New Password</label> \r\n                            <div class="col-lg-8">                      \r\n                                <input class="form-control" type="password"  data-bind="value: withoutLocalForm.newPassword" placeholder="New Password">                                               \r\n                            </div>\r\n                        </div>  \r\n                        <div class="form-group" data-bind="validationElement: withoutLocalForm.confirmNewPassword">\r\n                            <label class="control-label col-lg-4" for="confirmNewPassword">Confirm new Password</label>\r\n                            <div class="col-lg-8">\r\n                                <input class="form-control" type="password"  data-bind="value: withoutLocalForm.confirmNewPassword" placeholder="Confirm New Password">                                           \r\n                            </div>\r\n                        </div>         \r\n                        <div class="form-group">\r\n                            <div class="col-lg-offset-4">\r\n                                <button type="submit" class="btn btn-primary">Create local account</button>\r\n                                <button type="reset" class="btn btn-default">Reset</button>                \r\n                            </div>        \r\n                        </div>                                             \r\n                    </fieldset>\r\n               </form>  \r\n            </div>\r\n\r\n            <div class="col-lg-offset-1 col-lg-5">\r\n                <div data-bind="visible: externalAccounts().length > 0">\r\n                    <div class="page-header">\r\n                        <h4>You have registered logins with the following providers</h4>\r\n                    </div>\r\n                </div>\r\n                <div data-bind="foreach: externalAccounts">\r\n                    <div class="row">\r\n                        <div class="col-lg-4">\r\n                            <p class="lead" data-bind="text: ProviderDisplayName" style="border:none"></p>\r\n                        </div>\r\n                        <div class="col-lg-8" data-bind="if: $parent.showRemoveButton">\r\n                            <a class="btn btn-danger" href="#" data-bind="click: function (data, event) { $parent.removeExternalAccount($parent, data, event); }, text: \'Remove\'"></a>\r\n                        </div>\r\n                    </div>                \r\n                </div>        \r\n                <div class="page-header">\r\n                    <h4>Associate more external accounts to this one</h4>\r\n                </div>                \r\n                <div class="list-group" data-bind="foreach: appsecurity.externalLogins">                        \r\n                    <a class="list-group-item lead" href="#"  data-bind="click: function (data, event) { $parent.externalLogin($parent, data, event) }, attr: { \'data-provider\': Provider }">\r\n                        <i data-bind="css: $parent.socialIcon($data)"></i>\r\n                        <span data-bind="text: ProviderDisplayName"></span>\r\n                    </a>\r\n                </div>\r\n                <hr />\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'}),n("text!views/account/register.html",[],function(){return'<div id="register">\r\n    <div class="container">\r\n        <div class="page-header">\r\n            <h1 class="text-center">Register now   <small>create a new account in this site</small></h1>\r\n        </div>\r\n        <div class="row">\r\n            <div class="col-lg-offset-3 col-lg-6">        \r\n                <form data-bind="submit : register" class="form-horizontal">\r\n                    <div class="form-group" data-bind="validationElement: username">\r\n                         <label class="control-label col-lg-4" for="username">Username</label>                        \r\n                        <div class="col-lg-8">\r\n                            <input class="form-control" type="text"  data-bind="value: username" placeholder="User name">      \r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group" data-bind="validationElement: email">\r\n                         <label class="control-label col-lg-4" for="username">Email</label>                     \r\n                        <div class="col-lg-8">\r\n                            <input class="form-control" type="text"  data-bind="value: email" placeholder="Email"> \r\n                        </div>\r\n                    </div>                   \r\n                    <div class="form-group" data-bind="validationElement: password">\r\n                         <label class="control-label col-lg-4" for="email">Password</label>\r\n                        <div class="col-lg-8">\r\n                            <input class="form-control" type="password"  data-bind="value: password" placeholder="Password">  \r\n                        </div>\r\n                    </div>  \r\n                    <div class="form-group" data-bind="validationElement: confirmpassword">\r\n                         <label class="control-label col-lg-4" for="email">ConfirmPassword</label>\r\n                        <div class="col-lg-8">\r\n                            <input class="form-control" type="password"  data-bind="value: confirmpassword" placeholder="Confirm Password">  \r\n                        </div>\r\n                    </div>  \r\n                    <div class="col-lg-offset-4">\r\n                        <button type="submit" class="btn btn-primary">Register</button>\r\n                        <button type="reset" class="btn btn-default">Reset</button>\r\n                    </div>    \r\n                </form>                      \r\n            </div>          \r\n        </div>\r\n    </div>\r\n </div>'}),n("text!views/admin/panel.html",[],function(){return'<div id="panel">\r\n    <div class="container">\r\n        <div class="page-header">\r\n            <h1>Admin Panel   <small>supersecret information :)</small></h1>\r\n        </div>\r\n        <h4>Check the list of the registered users on this site</h4>\r\n        <div class="row mart5" data-bind="foreach : userprofiles">\r\n            <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">\r\n                <div class="row">\r\n                    <div class="col-xs-4">\r\n                        <a class="thumbnail">\r\n                            <img src="/Content/icons/icon_user.png"/>\r\n                        </a>                        \r\n                    </div>\r\n                    <div class="col-xs-8 h-vcenter-parent">\r\n                        <div class="h-vcenter-child">\r\n                            <h3 data-bind="text: \'# \' + userProfileId() + \'  \' + userName()"></h3>                        \r\n                        </div>                        \r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>	       \r\n    </div>\r\n</div>\r\n'}),n("text!views/home/about.html",[],function(){return'<div id="about">\r\n    <div class="row">\r\n        <div class="col-lg-6">\r\n            <div class="about-content strawberry">\r\n                <h1><i class="icon-user"></i>Who am I?</h1>\r\n                <p class="lead">My name is Yago and I am a Spanish developer and passionate about web design and programming</p>     \r\n            </div>                                                \r\n            <div class="about-content strawberry" style="margin-top:-5px;">\r\n                <h1><i class="icon-eye-open"></i>What i like to do?</h1>\r\n                <p class="lead">I like to learn and explore new technologies and development environments . I also like to take a look at new and amazing projects to see how they evolve</p>                      \r\n            </div>                        \r\n        </div>\r\n        <div class="col-lg-6">\r\n            <div class="about-content sky">\r\n                <h1><i class="icon-comments"></i>How can you contact me?</h1>\r\n                <ul class="unstyled">\r\n                    <li><a href="https://github.com/yagopv" target="_blank"><i class="icon-github"></i>Github</a></li>\r\n                    <li><a href="https://twitter.com/yperezva" target="_blank"><i class="icon-twitter-sign"></i>Twitter</a></li>\r\n                    <li><a href="https://www.facebook.com/yago.perezvazquez" target="_blank"><i class="icon-facebook-sign"></i>Facebook</a>                        </li>           <li><a href="http://es.linkedin.com/pub/yago-p%C3%A9rez-v%C3%A1zquez/45/453/381" target="_blank"><i class="icon-linkedin-sign"></i>LinkedIn</a></li>\r\n                </ul>                                            \r\n            </div>        \r\n            <div class="about-content sky" style="margin-top:-5px;">\r\n                <h1><i class="icon-cloud"></i>Where I am?</h1>\r\n                <p class="lead">in a galaxy far, far away...</p>                \r\n            </div>                    \r\n        </div>            \r\n    </div>\r\n</div>'}),n("text!views/home/articles.html",[],function(){return'<div id="articles">\r\n    <div class="st-offcanvas">\r\n        <div class="st-offcanvas-menu">\r\n            <div class="input-group mart5">\r\n                <input type="text" class="form-control" data-bind="value: search, event: { \'change\': function () { searchArticles(false); }, \'keypress\': evaluateKey }" placeholder="Search for articles">\r\n                <span class="input-group-btn">\r\n                    <button class="btn btn-default" data-bind="click: function () { searchArticles(false); }" type="button"><i class="icon-search"></i></button>\r\n                </span>\r\n            </div>\r\n            <div class="panel panel-default mart5">\r\n                <div class="panel-heading">Select any Category</div>\r\n                <div class="list-group">\r\n                    <a href="#" class="list-group-item" data-bind="text: \'All\', click: removeSelectedCategory"></a>\r\n                    <!-- ko  foreach : categories -->\r\n                        <a href="#" class="list-group-item" data-bind="text: name, click: function () { $parent.changeSelectedCategory($data, $parent) } "></a>\r\n                    <!-- /ko -->                    \r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="st-offcanvas-main">\r\n            <div class="row offcanvas-buttons">\r\n                <a href="#" class="showmenubutton"><i class="icon-th"></i></a>\r\n            </div>\r\n\r\n            <div data-bind="if: articles().length === 0" class="mart5">\r\n                <h1>No articles found</h1>\r\n                <p class="lead">Change filter criteria to find articles</p>\r\n            </div>\r\n\r\n            <div data-bind="if: articles().length > 0" class="mart5">\r\n                <!-- Articles List -->\r\n\r\n                <div data-bind="foreach: articles">\r\n                    <div class="row mart2">\r\n                        <div class="hidden-xs col-sm-3 col-md-2 col-lg-2">\r\n                            <div class="st-image">\r\n                                <div class="st-image-container">\r\n                                    <a href="#" class="thumbnail">\r\n                                        <img data-bind="attr: { src: imageUrl }" />\r\n                                    </a>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div class="col-xs-12 col-sm-9 col-md-10 col-lg-10">\r\n                            <h2 class="mart0" data-bind="text: title"></h2>\r\n                            <div class="mart2">\r\n                                <span class="label label-info" data-bind="text: formattedCreatedDate"></span>\r\n                                <span class="label label-info" data-bind="text: createdBy"></span>\r\n                            </div>\r\n                            <p class="mart2" data-bind="text: description"></p>\r\n                            <div class="mart2">\r\n                                <a class="btn btn-primary" data-bind="attr: { href: (\'#/\' + createdBy() + \'/\' + category().name() + \'/\' + urlCodeReference()).toLowerCase() }"><i class="icon-eye"></i>View article</a>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <hr class="mart5" />\r\n                </div>\r\n\r\n                <!-- Articles List End -->\r\n                <a id="btn-loadmore" class="btn btn-primary mart2" data-bind="click: loadMoreArticles">Load more articles</a>\r\n            </div>\r\n            <hr class="mart2" />\r\n        </div>\r\n    </div>\r\n</div>'}),n("text!views/home/index.html",[],function(){return'<div id="index">\r\n    <div id="featured" class="st-slider">\r\n        <ul class="jumbotron st-slider-panes">\r\n            <li>\r\n                <div class="st-slider-content">\r\n                    <div class="row">\r\n                        <div class="col-sm-offset-1 col-sm-10">\r\n                            <div class="hidden-xs col-sm-3 col-md-2 col-lg-2">\r\n                                <a class="thumbnail" href="#">\r\n                                    <img src="/Content/icons/icon_lock.png" alt="Durandal!!" />\r\n                                </a>\r\n                            </div>\r\n                            <div class="col-xs-12 col-sm-9 col-md-10 col-lg-10">\r\n                                <h1 class="mart0">Welcome to the DurandalAuth sample project !!</h1>\r\n                                <p class="mart2 prewrap">This template provide a way to authenticate users using Durandal and FormsAuthentication with ASP SimpleMembership provider</p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </li>\r\n            <li>\r\n                <div class="st-slider-content">\r\n                    <div class="row">\r\n                        <div class="col-sm-offset-1 col-sm-10">\r\n                            <div class="hidden-xs col-sm-3 col-md-2 col-lg-2">\r\n                                <a class="thumbnail" href="#">\r\n                                    <img src="/Content/icons/icon_data.png" alt="Breeze!!" />\r\n                                </a>\r\n                            </div>\r\n                            <div class="col-xs-12 col-sm-9 col-md-10 col-lg-10">\r\n                                <h1 class="mart0">Breeze for data management</h1>\r\n                                <p class="mart2 prewrap">Client side data management uses the excellent Breeze JS framework</p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </li>\r\n            <li>\r\n                <div class="st-slider-content">\r\n                    <div class="row">\r\n                        <div class="col-sm-offset-1 col-sm-10">\r\n                            <div class="hidden-xs col-sm-3 col-md-2 col-lg-2">\r\n                                <a class="thumbnail" href="#">\r\n                                    <img src="/Content/icons/icon_cloud.png" alt="ASP MVC and Web API" />\r\n                                </a>\r\n                            </div>\r\n                            <div class="col-xs-12 col-sm-9 col-md-10 col-lg-10">\r\n                                <h1 class="mart0">ASP MVC and Web API</h1>\r\n                                <p class="mart2 prewrap">ASP MVC and Web API for the server side</p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </li>\r\n            <li>\r\n                <div class="st-slider-content">\r\n                    <div class="row">\r\n                        <div class="col-sm-offset-1 col-sm-10">\r\n                            <div class="hidden-xs col-sm-3 col-md-2 col-lg-2">\r\n                                <a class="thumbnail" href="#">\r\n                                    <img src="/Content/icons/icon_library.png" alt="Patterns!!" />\r\n                                </a>                                        \r\n                            </div>\r\n                            <div class="col-xs-12 col-sm-9 col-md-10 col-lg-10">\r\n                                <h1 class="mart0">Unit of Work and Repositories</h1>\r\n                                <p class="mart2 prewrap">Yo will find an implementation of this patterns both server side (Entity Framework) and client side (Breeze)</p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </li>\r\n            <li>\r\n                <div class="st-slider-content">\r\n                    <div class="row">\r\n                        <div class="col-sm-offset-1 col-sm-10">\r\n                            <div class="hidden-xs col-sm-3 col-md-2 col-lg-2">\r\n                                <a class="thumbnail" href="#">\r\n                                    <img src="/Content/icons/icon_angles.png" alt="Bootstrap!!" />\r\n                                </a>                                        \r\n                            </div>\r\n                            <div class="col-xs-12 col-sm-9 col-md-10 col-lg-10">\r\n                                <h1 class="mart0">... and of course</h1>\r\n                                <p class="mart2 prewrap">My favourite tool ... Bootstrap for styling this site</p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n    <div class="container">\r\n        <div class="row mart5">\r\n            <div class="col-lg-4 text-center">                \r\n                <img src="/Content/icons/icon_question.png" alt="Why this project?" width="150" />\r\n                <h3>Why this project?</h3>\r\n                <p>Because could´t find any proper way of working with this technology stack and this type authentication ... so i tried to write it myself</p>\r\n            </div>\r\n            <div class="col-lg-4 text-center">\r\n                <img src="/Content/icons/icon_social.png" alt="Collaborate" width="150" />\r\n                <h3>Collaborate</h3>\r\n                <p>If you find bugs or you want to improve the sample project template feel free to contact me, create pull request or wathever you want</p>\r\n            </div>\r\n            <div class="col-lg-4 text-center">\r\n                <img src="/Content/icons/icon_project.png" alt="Project" width="150" />                \r\n                <h3>Visit the project site ...</h3>\r\n                <p>... <a href="https://github.com/yagopv/DurandalAuth" target="_blank">on Github</a> and check the code if you want</p>\r\n            </div>\r\n        </div>\r\n        <div class="row mart5">\r\n            <div class="col-lg-12">\r\n                <div class="page-header">\r\n                    <h2>How is this site working?</h2>\r\n                </div>            \r\n                <p>This site simulates a community managed article repository. People with account can write articles in their dashboards and make them public on the web.</p>\r\n                <p>The main objective of this sample application is provide a way to authenticate and authorize users similar to the default ASP MVC 4 Internet template. You will find here Forms and oAuth authentication built-in with the main social providers among another useful features.</p>\r\n                <p>I decided to leverage the first template i created and build a more complete application in order to show what Breeze JS can do for you and how to protect saving changes on server.</p>            \r\n                <hr />\r\n                <p>First thing you should do is trying to sign in for a new account using the <a href="/#/account/login">membership system or the oAuth providers</a>.</p>\r\n                <p>When you have done the registration, a role <span class="label label-info">User</span> will be asigned to you and will permit access to the <a href="/#/user/dashboard">user dashboard</a>. Once there, you can start writing articles.</p>\r\n                <p>While writing on your dashboard, remember to check the article like a public article if you want to make it visible for the rest of the community.</p>\r\n                <p>Aministrator users can access the <a href="/#/admin/panel">admin panel view</a>. If you want to access this view, you need to have the role <span class="label label-info">Administrator</span>.</p>\r\n                <p>Try to log in with the following one  <span class="label label-success">admin/admin1234</span> and once there, you will be able to check a list with the registered users on this site.</p>\r\n                <hr />\r\n                <blockquote class="bs-callout bs-callout-danger">\r\n                    <h2>Remember !!</h2>\r\n                    <p class="lead">The authorization system in the client can be always be hacked, so remember to always authenticate and authorize the request in the server when retrieving the necessary data for your views</p>\r\n                </blockquote>\r\n            </div>\r\n        </div>\r\n        <hr />\r\n    </div>\r\n</div>'}),n("text!views/user/article.html",[],function(){return'<div id="#article">\r\n    <div class="container" data-bind="with: article">\r\n        <div class="row">\r\n            <div class="hidden-xs col-sm-3 col-md-2 col-lg-2">\r\n                <div class="st-image">\r\n                    <div class="st-image-container">\r\n                        <a href="#" class="thumbnail">\r\n                            <img data-bind="attr: { src: imageUrl }" />\r\n                        </a>                        \r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="col-xs-12 col-sm-9 col-md-10 col-lg-10">\r\n                <div class="page-header">\r\n                    <h1 class="mart0" data-bind="text: title"></h1>       \r\n                </div>                \r\n                <span class="label label-info" data-bind="text: formattedCreatedDate"></span>\r\n                <span class="label label-info" data-bind="text: createdBy"></span>\r\n            </div>            \r\n        </div>\r\n\r\n        <div class="row col-sm-12 mart2" data-bind="foreach: tags">\r\n            <span class="label label-primary" data-bind="text: name"></span>\r\n        </div>\r\n\r\n        <div class="row col-sm-12">\r\n            <p class="mart2 prewrap lead" data-bind="text: description"></p>\r\n        </div>\r\n\r\n        <div class="row col-sm-12 mart2 prewrap" data-bind="html: html"></div>\r\n\r\n    </div>\r\n</div>\r\n'}),n("text!views/user/dashboard.html",[],function(){return'<div id="dashboard">\r\n    <div class="container">\r\n        <div class="page-header">\r\n            <h1>Dashboard</h1>\r\n        </div>\r\n        <p class="lead">Write, update and delete your personal articles</p>\r\n\r\n        <a class="btn btn-primary" data-bind="click : newArticle"><i class="icon-plus-sign"></i>   New Article</a>\r\n\r\n        <a class="btn btn-success" data-bind="click: saveArticles"><i class="icon-save"></i>   Save all changes</a>\r\n\r\n        <!-- Articles List -->\r\n\r\n        <div id="dashboard-articles" data-bind="foreach : { data : articles, afterAdd : utils.addItemAnimation, beforeRemove : utils.removeItemAnimation }" class="mart5">\r\n            <div class="row">\r\n                <div class="hidden-xs col-sm-3 col-md-2 col-lg-2">\r\n                    <div class="st-image">\r\n                        <div class="st-image-container">\r\n                            <a class="thumbnail">\r\n                                <img data-bind="attr: { src: imageUrl }" alt="Article Logo"/>\r\n                            </a>                            \r\n                        </div>\r\n                    </div>                    \r\n                </div>\r\n                <div class="col-xs-12 col-sm-9 col-md-10 col-lg-10">\r\n                    <h2 class="mart0" data-bind="text : title"></h2>\r\n                    <div class="mart2">\r\n                        <span class="label label-info" data-bind="text: formattedCreatedDate"></span>\r\n                        <span class="label label-success" data-bind="visible: isPublished">Published</span>\r\n                        <span class="label label-warning" data-bind="visible: !isPublished()">Pending</span>\r\n                        <span class="label label-danger" data-bind="visible: unsavedChanges">Unsaved changes</span>\r\n                        <span class="label label-danger" data-bind="visible: hasValidationErrors">Article with validation errors</span>\r\n                    </div>\r\n                    <p  class="mart2" data-bind="text : description"></p>\r\n                    <div data-bind="foreach: tags" class="mart2">\r\n                        <span class="label label-primary" data-bind="text: name"></span>\r\n                    </div>\r\n                    <div class="mart2">\r\n                        <a class="btn btn-primary" data-bind="click: function () { $parent.editArticle(this, $parent) }">Edit</a>\r\n                        <a class="btn btn-danger" data-bind="click: function () { $parent.deleteArticle(this, $parent, false) }">Delete</a>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <hr />\r\n        </div>\r\n\r\n        <!-- Articles List End -->\r\n\r\n        <!-- Edited Article -->\r\n\r\n        <div class="modal fade" id="edited-article"  data-bind="with: selectedArticle">\r\n          <div class="modal-dialog">\r\n                <div class="modal-content">\r\n                    <div class="modal-header">\r\n                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true" data-bind="click: $parent.closeModal">&times;</button>\r\n                        <h1 class="modal-title" data-bind="text: title() == \'\' ? \'New article\' : title"></h1>\r\n                    </div>\r\n                    <div class="modal-body">\r\n                        <div class="form-group" data-bind="validationElement: imageUrl">\r\n                            <div class="page-header">\r\n                                <h2><i class="icon-picture"></i>   Logo  <small>enter logo for the article</small></h2>                                        \r\n                            </div>\r\n                            <div class="row">\r\n                                <div class="col-xs-3 col-sm-4 col-md-3 col-lg-2">\r\n                                    <div class="st-image">\r\n                                        <div class="st-image-container">\r\n                                            <a href="#" class="thumbnail">\r\n                                                <img id="selected-article-img" data-bind="attr: { src: imageUrl }" alt="Url for the image representing the Article" />                                \r\n                                            </a>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div class="col-xs-9 col-sm-8 col-md-9 col-lg-10">                                    \r\n                                    <input class="form-control mart2" type="text"  data-bind="value: imageUrl" placeholder="Url for the image representing the Article">                        \r\n                                    <span class="help-block">Enter the image url you would like to use as the main image for this article</span>\r\n                                </div>                                                        \r\n                            </div>\r\n                        </div>\r\n                        <div class="page-header">\r\n                            <h2><i class="icon-list-ul"></i>   Main info   <small>enter some info about the article</small></h2>\r\n                        </div>\r\n                        <div class="form-group" data-bind="validationElement: title">\r\n                             <label class="control-label" for="username">Title</label>                        \r\n                             <input class="form-control" type="text"  data-bind="value: title" placeholder="Title">      \r\n                        </div>\r\n                        <div class="form-group" data-bind="validationElement: description">\r\n                             <label class="control-label" for="username">Brief description</label>                     \r\n                             <textarea rows="4" cols="60" class="form-control" data-bind="value: description" placeholder="Description"></textarea> \r\n                        </div>\r\n                        <div class="form-group" data-bind="validationElement: categoryId">\r\n                            <label class="control-label" for="email">Categorize the article</label>\r\n                            &nbsp;&nbsp;<select data-bind="options: $parent.categories, optionsText: \'name\', optionsValue: \'categoryId\', value: categoryId, optionsCaption: \'Choose...\'"></select>\r\n                        </div>\r\n                        <div class="checkbox">\r\n                            <label>\r\n                                <input type="checkbox" data-bind="checked: isPublished"> <span>Publish</span>\r\n                            </label>\r\n                        </div>\r\n                        <div class="page-header">\r\n                            <h2><i class="icon-pencil"></i>   Content   <small>write your article. Markdown is allowed</small></h2>\r\n                        </div>\r\n                        <div class="form-group" data-bind="validationElement: markdown">\r\n                            <div>\r\n                                <a class="btn btn-primary"  href="#" data-bind="click: function () { $parent.changePreview(this, $parent) }"><i class="icon-eye-open"></i>  Change Edit/Preview</a>\r\n                                <a class="btn btn-primary go-zen"  href="#"><i class="icon-pencil"></i>  Edit in Zen Mode with no distraction</a>\r\n                            </div>                        \r\n                            <div class="form-group mart2">                                \r\n                                <textarea rows="10" cols="60" class="form-control auto-height-textarea zen-mode" data-bind="value: markdown, visible: !$parent.preview(), event: { \'change\': $parent.convertMarkdown }" placeholder="Enter content here using markdown"></textarea>\r\n                            </div>\r\n                            <div class="mart5" data-bind="html: html, visible: $parent.preview"></div>\r\n                            <p class="text-right"><abbr title="Markdown is allowed within the textarea. Click preview for watch html result">markdown</abbr></p>\r\n                        </div>\r\n                        <div class="page-header">\r\n                            <h2><i class="icon-tags"></i>   Tags   <small>start tagging your article</small></h2>\r\n                        </div>\r\n                        <div class="form-group">\r\n                             <input id="tags" class="form-control" type="text"  data-bind="value: splitTags">      \r\n                        </div>\r\n                    </div>\r\n                    <div class="modal-footer">\r\n                        <button type="button" class="btn btn-default" data-dismiss="modal" data-bind="click: $parent.closeModal">Close</button>                        \r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- End Edited Article -->\r\n\r\n    </div>\r\n</div>\r\n'
}),t(["main"])})();